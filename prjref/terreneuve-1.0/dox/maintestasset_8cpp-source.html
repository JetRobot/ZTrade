<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>maintestasset.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>maintestasset.cpp</h1><a href="maintestasset_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include"..\PartC\asset.h"</span>
00002 <span class="preprocessor">#include "../common/filereader.h"</span>
00003 
00004 <span class="preprocessor">#include&lt;iostream&gt;</span>
00005 <span class="preprocessor">#include&lt;valarray&gt;</span>
00006 <span class="preprocessor">#include&lt;time.h&gt;</span>
00007 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00008 
00009 
<a name="l00014"></a><a class="code" href="maintestasset_8cpp.html#a0">00014</a> <span class="keywordtype">bool</span> <a class="code" href="testObjects_8h.html#a8">mainasset</a>(<span class="keywordtype">void</span>) {
00015         string datadir = <a class="code" href="classFileReader.html#e4">FileReader::getdatadirasstring</a>();
00016         string yieldCurveData = datadir + <span class="stringliteral">"yctest.csv"</span>;
00017         <span class="keywordtype">bool</span> result=<span class="keyword">true</span>;
00018         <a class="code" href="types_8h.html#a10">Real</a> test=0.0;
00019         <span class="comment">// the underlying curve</span>
00020         valarray&lt;yieldPoint&gt; *rates = 
00021                 <a class="code" href="classFileReader.html#e5">FileReader::buildYieldPointArray</a>(yieldCurveData);
00022 
00023         <a class="code" href="classyieldCurve.html">yieldCurve</a> testcurve=<a class="code" href="classyieldCurve.html">yieldCurve</a>(*rates,<span class="stringliteral">"test"</span>);
00024 
00025         <a class="code" href="classDate.html">Date</a> d= <a class="code" href="classDate.html">Date</a>();
00026         d.<a class="code" href="classDate.html#a13">setDateToToday</a>();
00027         d=d.<a class="code" href="classDate.html#a31">plusYears</a> (1);
00028         <a class="code" href="classflowSchedule.html">flowSchedule</a> flow1=<a class="code" href="classflowSchedule.html">flowSchedule</a>(d,0.05); <span class="comment">//5% after 1Y</span>
00029         d.<a class="code" href="classDate.html#a13">setDateToToday</a>();
00030         d=d.<a class="code" href="classDate.html#a31">plusYears</a> (2);
00031         flowSchedule flow2=flowSchedule(d,0.05); <span class="comment">//5% after 2Y</span>
00032         valarray&lt;flowSchedule&gt; divSched(2);
00033         divSched [0]=flow1;
00034         divSched [1]=flow2;
00035         <a class="code" href="classasset.html">asset</a> <a class="code" href="ParkMiller_8h.html#a0">a</a>=<a class="code" href="classasset.html">asset</a>(100,testcurve,<span class="keyword">false</span>,0,divSched);
00036         d.<a class="code" href="classDate.html#a13">setDateToToday</a>();
00037         d=d.<a class="code" href="classDate.html#a31">plusYears</a> (1);
00038         d=d.<a class="code" href="classDate.html#a28">plusDays</a> (-1);
00039         
00040         test=<a class="code" href="ParkMiller_8h.html#a0">a</a>.forwardPrice(d);
00041         result&amp;=(test==100);
00042         cout&lt;&lt;<span class="stringliteral">"Div Sched - fwd 1yr minus 1day of payment: "</span>&lt;&lt;test&lt;&lt;endl;
00043         
00044         d=d.<a class="code" href="classDate.html#a28">plusDays</a> (+1);
00045         test=<a class="code" href="ParkMiller_8h.html#a0">a</a>.forwardPrice(d);
00046         result&amp;=(test&gt;95.2387)&amp;&amp;(test&lt;95.2389);
00047         cout&lt;&lt;<span class="stringliteral">"Div Sched - fwd 1yr of payment: "</span>&lt;&lt;test&lt;&lt;endl;
00048         
00049         d.<a class="code" href="classDate.html#a13">setDateToToday</a>();
00050         d=d.<a class="code" href="classDate.html#a31">plusYears</a> (2);
00051         test=<a class="code" href="ParkMiller_8h.html#a0">a</a>.forwardPrice(d);
00052         result&amp;=(test&gt;90.6942)&amp;&amp;(test&lt;90.6944);
00053         cout&lt;&lt;<span class="stringliteral">"Div Sched - fwd 2yrs of payment: "</span>&lt;&lt;test&lt;&lt;endl;
00054 
00055         <a class="code" href="ParkMiller_8h.html#a0">a</a>.setDivAsRate(0.05);
00056         d.<a class="code" href="classDate.html#a13">setDateToToday</a>();
00057         d=d.<a class="code" href="classDate.html#a31">plusYears</a> (1);
00058         test=<a class="code" href="ParkMiller_8h.html#a0">a</a>.forwardPrice(d);
00059         result&amp;=(test&gt;94.7273)&amp;&amp;(test&lt;94.7275);
00060         cout&lt;&lt;<span class="stringliteral">"Fixed div Rate - fwd 1yr of payment: "</span>&lt;&lt;test&lt;&lt;endl;
00061         
00062         <span class="comment">// For output file</span>
00063         valarray&lt;flowSchedule&gt; testFlows(10);
00064         d.<a class="code" href="classDate.html#a13">setDateToToday</a>();
00065         <a class="code" href="types_8h.html#a10">Real</a> rate;
00066         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> i=0;i&lt;10;i++){
00067                 d=d.<a class="code" href="classDate.html#a31">plusYears</a> (1);
00068                 <span class="keywordflow">if</span> (i % 2 == 0)
00069                         rate =0.05;
00070                 <span class="keywordflow">else</span>
00071                         rate =0.10;
00072                 testFlows[i]=flowSchedule(d,rate);
00073         }
00074 
00075         asset b= asset(100,testcurve,<span class="keyword">false</span>,0,testFlows,<a class="code" href="types_8h.html#a16a14">EUR</a>);
00076         asset c= asset(100,testcurve,<span class="keyword">true</span>,0.075);
00077         string filename = <a class="code" href="classFileReader.html#e4">FileReader::getdatadirasstring</a>() + <span class="stringliteral">"test_Asset.txt"</span>; 
00078         ofstream myfile(filename.c_str()); 
00079         myfile &lt;&lt; <span class="stringliteral">"Test Forward Price - Div Sched 0.05 even years, 0.10 odd years, for 10 years\n"</span>;
00080         d.<a class="code" href="classDate.html#a13">setDateToToday</a>();
00081         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> i=1;i&lt;=24;i++){
00082                 d=d.<a class="code" href="classDate.html#a30">plusMonths</a> (6);
00083                 myfile&lt;&lt;d.<a class="code" href="classDate.html#a37">toString</a>()&lt;&lt;<span class="stringliteral">" , "</span>&lt;&lt;b.<a class="code" href="classasset.html#a19">forwardPrice</a>(d)&lt;&lt;<span class="stringliteral">"\n"</span>;
00084         }       
00085         myfile &lt;&lt; <span class="stringliteral">"\nTest Forward Price - Fixed Rate at 0.075, for 10 years\n"</span>;
00086         d.<a class="code" href="classDate.html#a13">setDateToToday</a>();
00087         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> i=1;i&lt;=24;i++){
00088                 d=d.<a class="code" href="classDate.html#a30">plusMonths</a> (6);
00089                 myfile&lt;&lt;d.<a class="code" href="classDate.html#a37">toString</a>()&lt;&lt;<span class="stringliteral">" , "</span>&lt;&lt;c.<a class="code" href="classasset.html#a19">forwardPrice</a>(d)&lt;&lt;<span class="stringliteral">"\n"</span>;
00090         }       
00091         myfile.close();
00092 
00093         <span class="keywordflow">return</span> result;
00094 }
</pre></div><hr size="1"><address style="align: right;"><small>
<b>Note: Generated nightly - reload for latest version</b><br>
Generated on Thu Dec 22 13:21:44 2005 for <a href="http://terreneuve.sourceforge.net">terreneuve</a> by <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0></a> 1.3.6</small></address>
</body>
</html>
