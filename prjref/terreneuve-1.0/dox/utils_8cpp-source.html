<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>utils.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>utils.cpp</h1><a href="utils_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include "<a class="code" href="utils_8h.html">utils.h</a>"</span>
00002 
00011 valarray&lt;Real&gt; 
<a name="l00012"></a><a class="code" href="utils_8h.html#a6">00012</a> <a class="code" href="utils_8h.html#a6">mergeunique</a>(valarray&lt;Real&gt; a1, valarray&lt;Real&gt; a2) {
00013         valarray&lt;Real&gt; temp(a1.size() + a2.size());
00014         <a class="code" href="types_8h.html#a10">Real</a> tempmin = -1 * <a class="code" href="types_8h.html#a3">TN_INFINITY</a>;
00015 
00016         <a class="code" href="types_8h.html#a7">Natural</a> a1idx = 0;
00017         <a class="code" href="types_8h.html#a7">Natural</a> a2idx = 0;
00018         <a class="code" href="types_8h.html#a7">Natural</a> tempidx = 0;
00019         <span class="keywordtype">bool</span> a1hasmore = (a1idx &lt; a1.size());
00020         <span class="keywordtype">bool</span> a2hasmore = (a2idx &lt; a2.size());
00021 
00022         <span class="keywordflow">while</span> (a1hasmore || a2hasmore) {
00023                 <span class="keywordflow">if</span> (a1hasmore &amp;&amp; !a2hasmore) {
00024                         <span class="keywordflow">if</span> (a1[a1idx] &gt; tempmin) {
00025                                 tempmin = temp[tempidx++] = a1[a1idx];
00026                         }
00027                         a1idx++;
00028                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!a1hasmore &amp;&amp; a2hasmore) {
00029                         <span class="keywordflow">if</span> (a2[a2idx] &gt; tempmin) {
00030                                 tempmin = temp[tempidx++] = a2[a2idx];
00031                         }
00032                         a2idx++;
00033                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a1[a1idx] &lt; a2[a2idx]) {
00034                         <span class="comment">// a1 is less than a2, take from a1</span>
00035                         <span class="keywordflow">if</span> (a1[a1idx] &gt; tempmin) {
00036                                 tempmin = temp[tempidx++] = a1[a1idx];
00037                         }
00038                         a1idx++;
00039                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a1[a1idx] &gt; a2[a2idx]) {
00040                         <span class="comment">// a2 is less than a1, take from a2</span>
00041                         <span class="keywordflow">if</span> (a2[a2idx] &gt; tempmin) {
00042                                 tempmin = temp[tempidx++] = a2[a2idx];
00043                         }
00044                         a2idx++;
00045                 } <span class="keywordflow">else</span> {
00046                         <span class="comment">// a1 = a2, take from a1 and advance both pointers</span>
00047                         <span class="keywordflow">if</span> (a1[a1idx] &gt; tempmin) {
00048                                 tempmin = temp[tempidx++] = a1[a1idx];
00049                         }
00050                         a1idx++;
00051                         a2idx++;
00052                 }
00053                 a1hasmore = (a1idx &lt; a1.size());
00054                 a2hasmore = (a2idx &lt; a2.size());
00055         }
00056 
00057         temp.resize(tempidx);
00058         <span class="keywordflow">return</span> temp;
00059 }
00060 
00061 
<a name="l00062"></a><a class="code" href="utils_8h.html#a1">00062</a> <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="utils_8h.html#a1">sign</a>(<a class="code" href="types_8h.html#a10">Real</a> x)
00063 {
00064         <span class="keywordflow">if</span>(x&gt;0)
00065                 <span class="keywordflow">return</span> 1;
00066         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(x&lt;0)
00067                 <span class="keywordflow">return</span> -1;
00068         <span class="keywordflow">else</span>
00069                 <span class="keywordflow">return</span> 0;
00070 }
00071 
00072 
00073 <span class="comment">//display error message, exit program if necessary</span>
<a name="l00074"></a><a class="code" href="utils_8h.html#a7">00074</a> <span class="keywordtype">void</span> <a class="code" href="utils_8h.html#a7">ErrorMsg</a>(string str, <span class="keywordtype">bool</span> mustexit)
00075 {
00076         cout &lt;&lt; <span class="stringliteral">"Error: "</span> &lt;&lt; str &lt;&lt; <span class="charliteral">'\n'</span>;
00077 
00078         <span class="keywordflow">if</span>(mustexit) {
00079                 cout &lt;&lt; <span class="stringliteral">"Exiting program\n"</span>;
00080                 exit(1);
00081         }
00082         <span class="keywordflow">else</span> {
00083                 <span class="keywordtype">char</span> ch = <span class="charliteral">'Q'</span>;
00084 
00085                 <span class="keywordflow">do</span> {
00086                         cout &lt;&lt; <span class="stringliteral">"Continue program execution? (Y/N): "</span>;
00087                         cin &gt;&gt; ch;
00088                         ch = toupper(ch);
00089                 } <span class="keywordflow">while</span>((ch != <span class="charliteral">'Y'</span>) &amp;&amp; (ch != <span class="charliteral">'N'</span>));
00090 
00091                 <span class="keywordflow">if</span>(ch == <span class="charliteral">'N'</span>) exit(1);
00092                 <span class="keywordflow">if</span>(ch == <span class="charliteral">'Y'</span>) <span class="keywordflow">return</span>;        <span class="comment">//yes, superfluous, but makes it more undertandable</span>
00093         }
00094 }
00095 
<a name="l00096"></a><a class="code" href="utils_8h.html#a2">00096</a> <a class="code" href="classMatrix.html">Matrix</a> <a class="code" href="utils_8h.html#a2">transform1DvalarrayToColumnMatrix</a>(valarray&lt;Real&gt; array)
00097 {
00098         <a class="code" href="types_8h.html#a7">Natural</a> size=(<a class="code" href="types_8h.html#a7">Natural</a>)array.size();
00099         <a class="code" href="classMatrix.html">Matrix</a> res=<a class="code" href="classMatrix.html">Matrix</a>(0.0,size,1);
00100         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> i=0;i&lt;size;i++)
00101                 res.<a class="code" href="classMatrix.html#a53">SetValue</a>(i,0,array[i]);
00102         <span class="keywordflow">return</span> res;
00103 }
00104 
00105 <span class="comment">// each valarray is here supposed to be of the same size</span>
00106 <span class="comment">// array[i] = the line (in the prupose of arrays of random numbers, [i] is the asset, and the line is the set of numbers</span>
<a name="l00107"></a><a class="code" href="utils_8h.html#a3">00107</a> <a class="code" href="classMatrix.html">Matrix</a> <a class="code" href="utils_8h.html#a3">transform2DvalarrayToMatrix</a>(valarray&lt;valarray&lt;Real&gt; &gt; array)
00108 {
00109         <a class="code" href="types_8h.html#a7">Natural</a> col=(<a class="code" href="types_8h.html#a7">Natural</a>)array.size();
00110         <a class="code" href="types_8h.html#a7">Natural</a> row=(<a class="code" href="types_8h.html#a7">Natural</a>)array[0].size();
00111         <a class="code" href="classMatrix.html">Matrix</a> res=<a class="code" href="classMatrix.html">Matrix</a>(0.0,row,col);
00112         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> i=0;i&lt;row;i++)
00113                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;col;j++)
00114                         res.<a class="code" href="classMatrix.html#a53">SetValue</a>(i,j,array[i][j]);
00115         <span class="keywordflow">return</span> res;
00116 }
00117 
00118 
<a name="l00119"></a><a class="code" href="utils_8h.html#a4">00119</a> valarray&lt;Real&gt; <a class="code" href="utils_8h.html#a4">transformColumnMatrixTo1Dvalarray</a>(<a class="code" href="classMatrix.html">Matrix</a> M)
00120 {
00121         <a class="code" href="types_8h.html#a7">Natural</a> size=<a class="code" href="MersenneTwister_8cpp.html#a1">M</a>.GetRows();
00122         valarray&lt;Real&gt; res(size);
00123         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> i=0;i&lt;size;i++)
00124                 res[i]=<a class="code" href="MersenneTwister_8cpp.html#a1">M</a>(i,0);
00125         <span class="keywordflow">return</span> res;
00126 }
00127 
<a name="l00128"></a><a class="code" href="utils_8h.html#a5">00128</a> valarray&lt;valarray&lt;Real&gt; &gt; <a class="code" href="utils_8h.html#a5">transformMatrixTo2Dvalarray</a>(<a class="code" href="classMatrix.html">Matrix</a> M)
00129 {
00130         <a class="code" href="types_8h.html#a7">Natural</a> col=<a class="code" href="MersenneTwister_8cpp.html#a1">M</a>.GetColumns();
00131         <a class="code" href="types_8h.html#a7">Natural</a> row=<a class="code" href="MersenneTwister_8cpp.html#a1">M</a>.GetRows();
00132         valarray&lt;valarray&lt;Real&gt; &gt; res(row);
00133         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> i=0;i&lt;row;i++){
00134                 res[i].resize(col);
00135                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;col;j++)
00136                         res[i][j]=<a class="code" href="MersenneTwister_8cpp.html#a1">M</a>(i,j);
00137         }
00138         <span class="keywordflow">return</span> res;
00139 }
00140 
00141 
00142 <span class="comment">//get safe int input</span>
<a name="l00143"></a><a class="code" href="utils_8h.html#a8">00143</a> <span class="keywordtype">int</span> <a class="code" href="utils_8h.html#a8">getint</a>(istream&amp; istr)
00144 {
00145         <span class="keywordtype">int</span> temp = 0;
00146         string str;
00147 
00148         <span class="keywordflow">while</span>(!(istr &gt;&gt; temp)) {
00149                 istr.clear();
00150                 istr &gt;&gt; str;
00151         }
00152 
00153         <span class="keywordflow">return</span> temp;
00154 }
00155 
00156 <span class="keywordtype">bool</span> 
<a name="l00157"></a><a class="code" href="utils_8h.html#a9">00157</a> <a class="code" href="utils_8h.html#a9">realsEqual</a>(<a class="code" href="types_8h.html#a10">Real</a> realOne, <a class="code" href="types_8h.html#a10">Real</a> realTwo, <a class="code" href="types_8h.html#a10">Real</a> precision) {
00158         <span class="keywordflow">return</span> (fabs(realOne - realTwo) &lt; precision);
00159 }
00160 
00161 string
<a name="l00162"></a><a class="code" href="utils_8h.html#a10">00162</a> <a class="code" href="utils_8h.html#a10">valarrayRealToString</a>(<span class="keyword">const</span> valarray&lt;Real&gt; &amp;theArray) {
00163         <a class="code" href="types_8h.html#a7">Natural</a> size = theArray.size();
00164         <span class="keywordtype">char</span> realString[10];
00165         string result = <span class="stringliteral">"[ "</span>;
00166         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> i = 0; i &lt; size; i++) {
00167                 sprintf(realString, <span class="stringliteral">"%5.4f"</span>, theArray[i]);
00168                 result = result + realString + <span class="stringliteral">" "</span>;
00169         }
00170         sprintf(realString, <span class="stringliteral">"%d"</span>, size);
00171         result = result + <span class="stringliteral">"] size: "</span> + realString;
00172         <span class="keywordflow">return</span> result;
00173 }
</pre></div><hr size="1"><address style="align: right;"><small>
<b>Note: Generated nightly - reload for latest version</b><br>
Generated on Thu Dec 22 13:21:44 2005 for <a href="http://terreneuve.sourceforge.net">terreneuve</a> by <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0></a> 1.3.6</small></address>
</body>
</html>
