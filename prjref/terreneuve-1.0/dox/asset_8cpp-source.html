<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>asset.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>asset.cpp</h1><a href="asset_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include ".\asset.h"</span>
00002 
00003 
00004 <span class="comment">/*------------------------------------------------------*/</span>
00005 <span class="comment">/*                 Flow Natural Implementation           */</span>
00006 <span class="comment">/*------------------------------------------------------*/</span>
00007 
<a name="l00008"></a><a class="code" href="classflowSchedule.html#a0">00008</a> <a class="code" href="classflowSchedule.html#a0">flowSchedule::flowSchedule</a>(<span class="keywordtype">void</span>) 
00009 {
00010         <a class="code" href="classflowSchedule.html#r0">_dateOfFlowPayment</a>=<a class="code" href="classDate.html">Date</a>();
00011         <a class="code" href="classflowSchedule.html#r1">_FlowAmountInPercent</a>=0;
00012         <a class="code" href="classflowSchedule.html#r2">_businessDayConventionOnPaymentDate</a>=<a class="code" href="date_8h.html#a47a33">Unadjusted</a>;
00013 }
00014 
<a name="l00015"></a><a class="code" href="classflowSchedule.html#a2">00015</a> <a class="code" href="classflowSchedule.html#a0">flowSchedule::flowSchedule</a>(<a class="code" href="classDate.html">Date</a> date,<a class="code" href="types_8h.html#a10">Real</a> percent,BusinessDayConvention bd)
00016 {
00017         <a class="code" href="classflowSchedule.html#r0">_dateOfFlowPayment</a>=date;
00018         <a class="code" href="classflowSchedule.html#r1">_FlowAmountInPercent</a>=percent;
00019         <a class="code" href="classflowSchedule.html#r2">_businessDayConventionOnPaymentDate</a>=bd;                           
00020 }
00021 
<a name="l00022"></a><a class="code" href="classflowSchedule.html#a1">00022</a> <a class="code" href="classflowSchedule.html#a1">flowSchedule::~flowSchedule</a>(<span class="keywordtype">void</span>)
00023 {
00024 };
00025 
00026 
00027 <span class="comment">/*------------------------------------------------------*/</span>
00028 <span class="comment">/*                 Asset Natural Implementation           */</span>
00029 <span class="comment">/*------------------------------------------------------*/</span>
00030 
00031 
<a name="l00032"></a><a class="code" href="classasset.html#a0">00032</a> <a class="code" href="classasset.html#a0">asset::asset</a>(<span class="keywordtype">void</span>)
00033 {
00034         <a class="code" href="classasset.html#r0">_currentPrice</a>=0.0;
00035         _yc=<a class="code" href="classyieldCurve.html">yieldCurve</a>();
00036         <a class="code" href="classasset.html#r2">_areDividendsAsGrowingRate</a>=<span class="keyword">false</span>;
00037         <a class="code" href="classasset.html#r3">_dividendGrowingRate</a>=0.0;
00038         <a class="code" href="classasset.html#r4">_announcedDividendFlows</a>=valarray&lt;flowSchedule&gt;();
00039         <a class="code" href="classasset.html#r5">_denomCur</a>=<a class="code" href="types_8h.html#a16a13">USD</a>;
00040         <a class="code" href="classasset.html#r6">_volatility</a>=<a class="code" href="asset_8h.html#a0">ASSET_DEFAULT_VOL</a>;
00041 }
00042 
<a name="l00043"></a><a class="code" href="classasset.html#a1">00043</a> <a class="code" href="classasset.html#a0">asset::asset</a>(<a class="code" href="types_8h.html#a10">Real</a> price,<a class="code" href="classyieldCurve.html">yieldCurve</a> yc,<span class="keywordtype">bool</span> areDividendsAsRate,<a class="code" href="types_8h.html#a10">Real</a> divRate,valarray&lt;flowSchedule&gt; flowsc,Currency ccy, <a class="code" href="types_8h.html#a10">Real</a> volatility)
00044 {
00045         <a class="code" href="classasset.html#r0">_currentPrice</a>=price;
00046         _yc=yc;
00047         <a class="code" href="classasset.html#r2">_areDividendsAsGrowingRate</a>=areDividendsAsRate;
00048         <a class="code" href="classasset.html#r3">_dividendGrowingRate</a>=divRate;
00049         <a class="code" href="classasset.html#r4">_announcedDividendFlows</a>=flowsc;
00050         <a class="code" href="classasset.html#r5">_denomCur</a>=ccy;
00051         <a class="code" href="classasset.html#r6">_volatility</a>=volatility;
00052 }
00053 
<a name="l00054"></a><a class="code" href="classasset.html#a2">00054</a> <a class="code" href="classasset.html#a0">asset::asset</a>(<a class="code" href="types_8h.html#a10">Real</a> price, <a class="code" href="types_8h.html#a10">Real</a> volatility)
00055 {
00056         <a class="code" href="classasset.html#r0">_currentPrice</a>=price;
00057         <a class="code" href="classasset.html#r6">_volatility</a>=volatility;
00058 
00059         <span class="comment">// defaults</span>
00060         _yc=<a class="code" href="classyieldCurve.html">yieldCurve</a>();
00061         <a class="code" href="classasset.html#r2">_areDividendsAsGrowingRate</a>=<span class="keyword">false</span>;
00062         <a class="code" href="classasset.html#r3">_dividendGrowingRate</a>=0.0;
00063         <a class="code" href="classasset.html#r4">_announcedDividendFlows</a>=valarray&lt;flowSchedule&gt;();
00064         <a class="code" href="classasset.html#r5">_denomCur</a>=<a class="code" href="types_8h.html#a16a13">USD</a>;
00065 }
00066 
<a name="l00067"></a><a class="code" href="classasset.html#a4">00067</a> <a class="code" href="types_8h.html#a10">Real</a> <a class="code" href="classasset.html#a4">asset::getRho</a>(<a class="code" href="types_8h.html#a10">Real</a> T){
00068         <a class="code" href="types_8h.html#a10">Real</a> pu,pd;
00069         <a class="code" href="classyieldCurve.html">yieldCurve</a> old=_yc,up=_yc.<a class="code" href="classyieldCurve.html#a4">shiftZCBRateCurve</a>(+0.001),down=_yc.<a class="code" href="classyieldCurve.html#a4">shiftZCBRateCurve</a>(-0.001);
00070         _yc=up;
00071         pu=<a class="code" href="classasset.html#a19">forwardPrice</a>(T);
00072         _yc=down;
00073         pd=<a class="code" href="classasset.html#a19">forwardPrice</a>(T);
00074         _yc=old;
00075         <span class="keywordflow">return</span> (pu-pd)/0.002;
00076 }
00077 
<a name="l00078"></a><a class="code" href="classasset.html#a20">00078</a> <a class="code" href="types_8h.html#a10">Real</a> <a class="code" href="classasset.html#a19">asset::forwardPrice</a>(<a class="code" href="types_8h.html#a10">Real</a> T){
00079         <a class="code" href="classDate.html">Date</a> start;
00080         start.<a class="code" href="classDate.html#a13">setDateToToday</a> ();
00081         <span class="keywordflow">return</span> <a class="code" href="classasset.html#a19">forwardPrice</a> (start.<a class="code" href="classDate.html#a28">plusDays</a>((<a class="code" href="types_8h.html#a7">Natural</a>)(365*T)));
00082 }
00083 
<a name="l00084"></a><a class="code" href="classasset.html#a7">00084</a> <span class="keywordtype">void</span> <a class="code" href="classasset.html#a7">asset::setDivAsRate</a>(<a class="code" href="types_8h.html#a10">Real</a> rate)
00085 {
00086         <a class="code" href="classasset.html#r2">_areDividendsAsGrowingRate</a>=<span class="keyword">true</span>;
00087         <a class="code" href="classasset.html#r3">_dividendGrowingRate</a> =rate;
00088 }
00089 
<a name="l00090"></a><a class="code" href="classasset.html#a18">00090</a> <a class="code" href="types_8h.html#a10">Real</a> <a class="code" href="classasset.html#a18">asset::Price</a>()
00091 {
00092         <span class="keywordflow">return</span> <a class="code" href="classasset.html#r0">_currentPrice</a>;
00093 }
00094 
00095 
00096 
<a name="l00097"></a><a class="code" href="classasset.html#a19">00097</a> <a class="code" href="types_8h.html#a10">Real</a> <a class="code" href="classasset.html#a19">asset::forwardPrice</a>(<a class="code" href="classDate.html">Date</a> maturityDate){
00098         <span class="keywordflow">if</span>(<a class="code" href="classasset.html#r2">_areDividendsAsGrowingRate</a>){
00099                 <a class="code" href="classDate.html">Date</a> today=<a class="code" href="classDate.html">Date</a>();
00100                 today.<a class="code" href="classDate.html#a13">setDateToToday</a>();
00101                 <a class="code" href="types_8h.html#a10">Real</a> timetomaturity=today.<a class="code" href="classDate.html#a36">dayCount</a>(maturityDate,<a class="code" href="date_8h.html#a48a42">Day30_360</a>);             
00102                 <span class="keywordflow">return</span> <a class="code" href="classasset.html#r0">_currentPrice</a>*exp(-timetomaturity*<a class="code" href="classasset.html#r3">_dividendGrowingRate</a>);
00103         }
00104         <span class="keywordflow">else</span>{
00105                 <a class="code" href="types_8h.html#a10">Real</a> sum=0;
00106                 <a class="code" href="types_8h.html#a7">Natural</a> i = 0;
00107                 <span class="keywordflow">while</span> (i&lt;<a class="code" href="classasset.html#r4">_announcedDividendFlows</a>.size() &amp;&amp; <a class="code" href="classasset.html#r4">_announcedDividendFlows</a>[i].getDate()&lt;=maturityDate){
00108                         sum+=<a class="code" href="classasset.html#r4">_announcedDividendFlows</a>[i].getAmount()*_yc.<a class="code" href="classyieldCurve.html#a12">discountFactor</a>(<a class="code" href="classasset.html#r4">_announcedDividendFlows</a>[i].getDate());
00109                         i++;
00110                 }
00111                 <span class="keywordflow">return</span> <a class="code" href="classasset.html#r0">_currentPrice</a>*(1-sum);
00112         }
00113 }
00114 
<a name="l00115"></a><a class="code" href="classasset.html#a21">00115</a> <a class="code" href="classasset.html#a21">asset::~asset</a>(<span class="keywordtype">void</span>)
00116 {
00117 }
</pre></div><hr size="1"><address style="align: right;"><small>
<b>Note: Generated nightly - reload for latest version</b><br>
Generated on Thu Dec 22 13:21:43 2005 for <a href="http://terreneuve.sourceforge.net">terreneuve</a> by <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0></a> 1.3.6</small></address>
</body>
</html>
