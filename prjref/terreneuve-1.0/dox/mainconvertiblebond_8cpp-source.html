<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mainconvertiblebond.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>mainconvertiblebond.cpp</h1><a href="mainconvertiblebond_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include "..\PartJ\convertiblebond.h"</span>
00002 <span class="preprocessor">#include "..\common\utils.h"</span>
00003 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00004 
<a name="l00005"></a><a class="code" href="mainconvertiblebond_8cpp.html#a0">00005</a> <span class="keywordtype">bool</span> <a class="code" href="testObjects_8h.html#a17">mainconvertiblebond</a>(<span class="keywordtype">void</span>) {
00006         <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;
00007         <a class="code" href="classDate.html">Date</a> today;
00008         <a class="code" href="classDate.html">Date</a> todayPlusTwentyYears;
00009 
00010         <span class="comment">// using atmel price from </span>
00011         <span class="comment">// http://www.math.nyu.edu/fellows_fin_math/laud/fall2005/project/CVT_DESC.gif</span>
00012         <span class="comment">// volatility as of 20-dec-2005 - see</span>
00013         <span class="comment">// http://www.ivolatility.com/options.j?ticker=atml</span>
00014         today.<a class="code" href="classDate.html#a13">setDateToToday</a>();
00015         todayPlusTwentyYears = today.<a class="code" href="classDate.html#a32">plus</a>(20 * 365, <a class="code" href="date_8h.html#a45a21">Days</a>);
00016         <a class="code" href="types_8h.html#a10">Real</a> atmelPrice = 2.23;
00017         <a class="code" href="types_8h.html#a10">Real</a> atmelVol = 0.44;
00018         <a class="code" href="types_8h.html#a10">Real</a> atmelFace = 1000;
00019         <a class="code" href="types_8h.html#a10">Real</a> riskfreeRate = 0.05;
00020         <a class="code" href="types_8h.html#a10">Real</a> atmelSpread = 0.02;
00021         <a class="code" href="types_8h.html#a10">Real</a> atmelConversion = 55.932;
00022         <a class="code" href="types_8h.html#a10">Real</a> atmelCallPrice = 50.0;
00023         <a class="code" href="types_8h.html#a10">Real</a> atmelPutPrice = 20.0;
00024         <a class="code" href="types_8h.html#a7">Natural</a> nSteps = 10;
00025 
00026         <a class="code" href="classasset.html">asset</a> *Atmel = <span class="keyword">new</span> <a class="code" href="classasset.html">asset</a>(atmelPrice, atmelVol);
00027         <a class="code" href="classriskybond.html">riskybond</a> *AtmelBond = <span class="keyword">new</span> <a class="code" href="classriskybond.html">riskybond</a>(today, 
00028                 todayPlusTwentyYears, 
00029                 atmelFace, 
00030                 <a class="code" href="date_8h.html#a48a39">ACT_365</a>, 
00031                 <a class="code" href="classyieldCurve.html">yieldCurve</a>(riskfreeRate),
00032                 <a class="code" href="classcreditCurve.html">creditCurve</a>(riskfreeRate, atmelSpread));
00033 
00034         <span class="comment">// test: ATMELNOCALLPUT</span>
00035         <span class="comment">//  check values in this test and next test verified using</span>
00036         <span class="comment">//  CBcalculator.xls</span>
00037         <a class="code" href="classconvertiblebond.html">convertiblebond</a> *AtmelConvertible1 = 
00038                 <span class="keyword">new</span> <a class="code" href="classconvertiblebond.html">convertiblebond</a>(*Atmel, *AtmelBond, atmelConversion, nSteps);
00039         cout &lt;&lt; <span class="stringliteral">"atmel convertible - no call put: "</span> &lt;&lt; AtmelConvertible1 &lt;&lt; endl;
00040         <a class="code" href="types_8h.html#a10">Real</a> p = AtmelConvertible1-&gt;<a class="code" href="classconvertiblebond.html#a2">fairvalue</a>();
00041         <a class="code" href="types_8h.html#a10">Real</a> pExp = 42.7113;
00042         <span class="keywordflow">if</span> (!<a class="code" href="utils_8h.html#a9">realsEqual</a>(p, pExp, 0.0001)) {
00043                 cout &lt;&lt; <span class="stringliteral">"convertible, non-callable, non-puttable price: "</span> &lt;&lt; p &lt;&lt; endl;
00044                 cout &lt;&lt; <span class="stringliteral">"expecting: "</span> &lt;&lt; pExp &lt;&lt; endl;
00045                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00046         }
00047 
00048         <span class="comment">// test: ATMELCALLONLY</span>
00049         convertiblebond *AtmelConvertible2 =
00050                 <span class="keyword">new</span> convertiblebond(*Atmel, *AtmelBond, atmelConversion, 
00051                 nSteps, atmelCallPrice);
00052         cout &lt;&lt; <span class="stringliteral">"atmel convertible - call only: "</span> &lt;&lt; AtmelConvertible2 &lt;&lt; endl;
00053         p = AtmelConvertible2-&gt;<a class="code" href="classconvertiblebond.html#a2">fairvalue</a>();
00054         pExp = 25.7722;
00055         <span class="keywordflow">if</span> (!<a class="code" href="utils_8h.html#a9">realsEqual</a>(p, pExp, 0.0001)) {
00056                 cout &lt;&lt; <span class="stringliteral">"convertible, callable price: "</span> &lt;&lt; p &lt;&lt; endl;
00057                 cout &lt;&lt; <span class="stringliteral">"expecting: "</span> &lt;&lt; pExp &lt;&lt; endl;
00058                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00059         }
00060 
00061         cout &lt;&lt; <span class="stringliteral">"callable @ 50"</span> &lt;&lt; endl
00062                 &lt;&lt; <span class="stringliteral">"So,convertibleprice,paritydelta,irdelta,paritygamma"</span> &lt;&lt; endl;
00063         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> i = 0; i &lt;= 100; i++) {
00064                 <a class="code" href="types_8h.html#a10">Real</a> p = 1 + i*.1;
00065                 Atmel-&gt;<a class="code" href="classasset.html#a5">setPrice</a>(p);
00066                 convertiblebond *cb =
00067                         <span class="keyword">new</span> convertiblebond(*Atmel, *AtmelBond, atmelConversion, 100, atmelCallPrice);
00068                 cout &lt;&lt; p &lt;&lt; <span class="stringliteral">","</span>
00069                         &lt;&lt; cb-&gt;<a class="code" href="classconvertiblebond.html#a2">fairvalue</a>() &lt;&lt; <span class="stringliteral">","</span>
00070                         &lt;&lt; cb-&gt;<a class="code" href="classconvertiblebond.html#a8">parityDelta</a>() &lt;&lt; <span class="stringliteral">","</span>
00071                         &lt;&lt; cb-&gt;<a class="code" href="classconvertiblebond.html#a11">rho</a>() &lt;&lt; <span class="stringliteral">","</span>
00072                         &lt;&lt; cb-&gt;<a class="code" href="classconvertiblebond.html#a17">parityGamma</a>() &lt;&lt; endl;
00073                 <span class="keyword">delete</span> cb;
00074         }
00075 
00076         cout &lt;&lt; <span class="stringliteral">"not callable"</span> &lt;&lt; endl
00077                 &lt;&lt; <span class="stringliteral">"So,convertibleprice,paritydelta,irdelta,paritygamma"</span> &lt;&lt; endl;
00078         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> i = 0; i &lt;= 100; i++) {
00079                 <a class="code" href="types_8h.html#a10">Real</a> p = 1 + i*.1;
00080                 Atmel-&gt;<a class="code" href="classasset.html#a5">setPrice</a>(p);
00081                 convertiblebond *cb =
00082                         <span class="keyword">new</span> convertiblebond(*Atmel, *AtmelBond, atmelConversion, 100);
00083                 cout &lt;&lt; p &lt;&lt; <span class="stringliteral">","</span>
00084                         &lt;&lt; cb-&gt;<a class="code" href="classconvertiblebond.html#a2">fairvalue</a>() &lt;&lt; <span class="stringliteral">","</span>
00085                         &lt;&lt; cb-&gt;<a class="code" href="classconvertiblebond.html#a8">parityDelta</a>() &lt;&lt; <span class="stringliteral">","</span>
00086                         &lt;&lt; cb-&gt;<a class="code" href="classconvertiblebond.html#a11">rho</a>() &lt;&lt; <span class="stringliteral">","</span>
00087                         &lt;&lt; cb-&gt;<a class="code" href="classconvertiblebond.html#a17">parityGamma</a>() &lt;&lt; endl;
00088                 <span class="keyword">delete</span> cb;
00089         }
00090 
00091 
00092         <span class="comment">// test: HULLEX21.1</span>
00093         <a class="code" href="classDate.html">Date</a> todayPlusNineMonths = today.<a class="code" href="classDate.html#a32">plus</a>(9, <a class="code" href="date_8h.html#a45a23">Months</a>);
00094         <a class="code" href="types_8h.html#a10">Real</a> XYZFace = 100;
00095         <a class="code" href="types_8h.html#a10">Real</a> XYZPrice = 50;
00096         <a class="code" href="types_8h.html#a10">Real</a> XYZVol = 0.3;
00097         <a class="code" href="types_8h.html#a10">Real</a> XYZConversion = 2;
00098         <a class="code" href="types_8h.html#a10">Real</a> XYZCallPrice = 113;
00099         <a class="code" href="types_8h.html#a10">Real</a> XYZSpread = 0;
00100         nSteps = 3;
00101         asset *XYZ = <span class="keyword">new</span> asset(XYZPrice, XYZVol);
00102         riskybond *XYZBond = <span class="keyword">new</span> riskybond(today, 
00103                 todayPlusNineMonths, 
00104                 XYZFace, 
00105                 <a class="code" href="date_8h.html#a48a39">ACT_365</a>, 
00106                 <a class="code" href="classyieldCurve.html">yieldCurve</a>(riskfreeRate), 
00107                 <a class="code" href="classcreditCurve.html">creditCurve</a>(riskfreeRate, XYZSpread));
00108         convertiblebond *XYZConvertible = 
00109                 <span class="keyword">new</span> convertiblebond(*XYZ, *XYZBond, XYZConversion, nSteps, XYZCallPrice);
00110         cout &lt;&lt; <span class="stringliteral">"XYZ convertible - call only: "</span> &lt;&lt; XYZConvertible &lt;&lt; endl;
00111         
00112         p = XYZConvertible-&gt;<a class="code" href="classconvertiblebond.html#a2">fairvalue</a>();
00113         <span class="comment">// value in Hull is 106.93 but we are not modelling the possibility of</span>
00114         <span class="comment">//  default so the price is slightly higher</span>
00115         pExp = 107.578; 
00116         <span class="keywordflow">if</span> (!<a class="code" href="utils_8h.html#a9">realsEqual</a>(p, pExp, 0.001)) {
00117                 cout &lt;&lt; <span class="stringliteral">"XYZ convertible, callable price: "</span> &lt;&lt; p &lt;&lt; endl;
00118                 cout &lt;&lt; <span class="stringliteral">"expecting: "</span> &lt;&lt; pExp &lt;&lt; endl;
00119                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00120         }
00121 
00122         <span class="keyword">delete</span> Atmel;
00123         <span class="keyword">delete</span> AtmelBond;
00124         <span class="keyword">delete</span> XYZ;
00125         <span class="keyword">delete</span> XYZBond;
00126         <span class="keyword">delete</span> AtmelConvertible1;
00127         <span class="keyword">delete</span> AtmelConvertible2;
00128         <span class="keyword">delete</span> XYZConvertible;
00129         <span class="keywordflow">return</span> result;
00130 }
</pre></div><hr size="1"><address style="align: right;"><small>
<b>Note: Generated nightly - reload for latest version</b><br>
Generated on Thu Dec 22 13:21:44 2005 for <a href="http://terreneuve.sourceforge.net">terreneuve</a> by <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0></a> 1.3.6</small></address>
</body>
</html>
