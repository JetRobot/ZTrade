<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CashFlow.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>CashFlow.cpp</h1><a href="CashFlow_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include "./cashflow.h"</span>
00002 
<a name="l00003"></a><a class="code" href="classCashFlow.html#a0">00003</a> <a class="code" href="classCashFlow.html#a0">CashFlow::CashFlow</a>(<a class="code" href="classSwapLeg.html">SwapLeg</a> swapLeg, <a class="code" href="types_8h.html#a10">Real</a> fixedRate)
00004 {
00005         <a class="code" href="classCashFlow.html#r0">flowAmount</a>=swapLeg.<a class="code" href="classSwapLeg.html#a4">returnAmounts</a>();
00006         <a class="code" href="classCashFlow.html#r1">flowDates</a>=swapLeg.<a class="code" href="classSwapLeg.html#a3">returnDates</a>();
00007         <a class="code" href="classDate.html">Date</a> d;
00008         d.<a class="code" href="classDate.html#a13">setDateToToday</a>();
00009         <a class="code" href="classCashFlow.html#r0">flowAmount</a>[0]=<a class="code" href="classCashFlow.html#r0">flowAmount</a>[0]*fixedRate*(<a class="code" href="classCashFlow.html#r1">flowDates</a>[0].serialNumber()-d.<a class="code" href="classDate.html#a10">serialNumber</a>())/365.0;
00010         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> i=1;i&lt;flowDates.size();i++) {
00011                 flowAmount[i]=flowAmount[i]*fixedRate*(flowDates[i].serialNumber()-flowDates[i-1].serialNumber())/365.0;
00012         }
00013 }
00014 
<a name="l00015"></a><a class="code" href="classCashFlow.html#a1">00015</a> <a class="code" href="classCashFlow.html#a0">CashFlow::CashFlow</a>(<a class="code" href="classSwapLeg.html">SwapLeg</a> swapLeg, <a class="code" href="classyieldCurve.html">yieldCurve</a> floatCurve)
00016 {
00017         <a class="code" href="classCashFlow.html#r0">flowAmount</a>=swapLeg.<a class="code" href="classSwapLeg.html#a4">returnAmounts</a>();
00018         <a class="code" href="classCashFlow.html#r1">flowDates</a>=swapLeg.<a class="code" href="classSwapLeg.html#a3">returnDates</a>();
00019         <a class="code" href="classDate.html">Date</a> d;
00020         d.<a class="code" href="classDate.html#a13">setDateToToday</a>();
00021         <a class="code" href="classCashFlow.html#r0">flowAmount</a>[0]=<a class="code" href="classCashFlow.html#r0">flowAmount</a>[0]*floatCurve.<a class="code" href="classyieldCurve.html#a15">forwardRate</a>(d,<a class="code" href="classCashFlow.html#r1">flowDates</a>[0],<a class="code" href="yieldCurve_8h.html#a8a4">Discrete</a>)*(<a class="code" href="classCashFlow.html#r1">flowDates</a>[0].serialNumber()-d.<a class="code" href="classDate.html#a10">serialNumber</a>())/365.0;
00022         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> i=1;i&lt;<a class="code" href="classCashFlow.html#r1">flowDates</a>.size();i++) {
00023                 flowAmount[i]=flowAmount[i]*floatCurve.<a class="code" href="classyieldCurve.html#a15">forwardRate</a>(<a class="code" href="classCashFlow.html#r1">flowDates</a>[i-1],<a class="code" href="classCashFlow.html#r1">flowDates</a>[i],<a class="code" href="yieldCurve_8h.html#a8a4">Discrete</a>)*(<a class="code" href="classCashFlow.html#r1">flowDates</a>[i].serialNumber()-<a class="code" href="classCashFlow.html#r1">flowDates</a>[i-1].serialNumber())/365.0;
00024         }
00025 }
00026 
<a name="l00027"></a><a class="code" href="classCashFlow.html#a2">00027</a> <a class="code" href="types_8h.html#a10">Real</a> <a class="code" href="classCashFlow.html#a2">CashFlow::getFairValue</a>(<a class="code" href="classyieldCurve.html">yieldCurve</a>* curve)
00028 {
00029         <a class="code" href="types_8h.html#a10">Real</a> result=0;
00030         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> i=0;i&lt;<a class="code" href="classCashFlow.html#r0">flowAmount</a>.size();i++) {
00031                 result+=<a class="code" href="classCashFlow.html#r0">flowAmount</a>[i]*curve-&gt;<a class="code" href="classyieldCurve.html#a12">discountFactor</a>(<a class="code" href="classCashFlow.html#r1">flowDates</a>[i],<a class="code" href="yieldCurve_8h.html#a8a4">Discrete</a>);
00032         }
00033         <span class="keywordflow">return</span> result;
00034 }
00035 
<a name="l00036"></a><a class="code" href="classCashFlow.html#a3">00036</a> <a class="code" href="classCashFlow.html#a3">CashFlow::~CashFlow</a>(<span class="keywordtype">void</span>)
00037 {
00038 }
</pre></div><hr size="1"><address style="align: right;"><small>
<b>Note: Generated nightly - reload for latest version</b><br>
Generated on Thu Dec 22 13:21:43 2005 for <a href="http://terreneuve.sourceforge.net">terreneuve</a> by <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0></a> 1.3.6</small></address>
</body>
</html>
