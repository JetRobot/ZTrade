<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>binomialTree.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>binomialTree.cpp</h1><a href="binomialTree_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include ".\binomialTree.h"</span>
00002 
<a name="l00003"></a><a class="code" href="classbinomialTree.html#a0">00003</a> <a class="code" href="classbinomialTree.html#a0">binomialTree::binomialTree</a>(<span class="keywordtype">void</span>) :
00004  _So(<a class="code" href="binomialTree_8h.html#a0">BT_DEFAULT_SO</a>),
00005  _sigma(<a class="code" href="binomialTree_8h.html#a2">BT_DEFAULT_SIGMA</a>),
00006  _maturity(<a class="code" href="binomialTree_8h.html#a3">BT_DEFAULT_MATURITY</a>),
00007  _n(<a class="code" href="binomialTree_8h.html#a4">BT_DEFAULT_STEPS</a>),
00008  _stockProcess(<a class="code" href="binomialTree_8h.html#a4">BT_DEFAULT_STEPS</a> + 1),
00009  _claimProcess(<a class="code" href="binomialTree_8h.html#a4">BT_DEFAULT_STEPS</a> + 1),
00010  _discountFactor(<a class="code" href="binomialTree_8h.html#a4">BT_DEFAULT_STEPS</a>),
00011  _q(<a class="code" href="binomialTree_8h.html#a4">BT_DEFAULT_STEPS</a>) {
00012         <a class="code" href="classbinomialTree.html#r4">_dt</a> = _maturity/<a class="code" href="classbinomialTree.html#r3">_n</a>;
00013         <a class="code" href="classbinomialTree.html#r5">_u</a> = exp(<a class="code" href="classbinomialTree.html#r1">_sigma</a> * sqrt(<a class="code" href="classbinomialTree.html#r4">_dt</a>));
00014         <a class="code" href="classbinomialTree.html#r6">_d</a> = 1/<a class="code" href="classbinomialTree.html#r5">_u</a>;
00015 
00016         <a class="code" href="classbinomialTree.html#b6">setClaimVariables</a>(<a class="code" href="binomialTree_8h.html#a1">BT_DEFAULT_RATE</a>);
00017         <a class="code" href="classbinomialTree.html#b5">constructStockProcess</a>();
00018 }
00019 
<a name="l00020"></a><a class="code" href="classbinomialTree.html#a1">00020</a> <a class="code" href="classbinomialTree.html#a0">binomialTree::binomialTree</a>(<a class="code" href="types_8h.html#a10">Real</a> So, 
00021                                                    <a class="code" href="types_8h.html#a10">Real</a> r, 
00022                                                    <a class="code" href="types_8h.html#a10">Real</a> sigma, 
00023                                                    <a class="code" href="types_8h.html#a10">Real</a> T, 
00024                                                    <a class="code" href="types_8h.html#a7">Natural</a> n) :
00025 _So(So), _sigma(sigma), _maturity(T), _n(n), 
00026 _stockProcess(n + 1),
00027 _claimProcess(n + 1), 
00028 _discountFactor(n), 
00029 _q(n) {
00030         <a class="code" href="classbinomialTree.html#r4">_dt</a> = T/n;
00031         <a class="code" href="classbinomialTree.html#r5">_u</a> = exp(sigma * sqrt(<a class="code" href="classbinomialTree.html#r4">_dt</a>));
00032         <a class="code" href="classbinomialTree.html#r6">_d</a> = 1/<a class="code" href="classbinomialTree.html#r5">_u</a>;
00033 
00034         <a class="code" href="classbinomialTree.html#b6">setClaimVariables</a>(<a class="code" href="ParkMiller_8h.html#a3">r</a>);
00035         <a class="code" href="classbinomialTree.html#b5">constructStockProcess</a>();
00036 }
00037 
<a name="l00038"></a><a class="code" href="classbinomialTree.html#a3">00038</a> <a class="code" href="classbinomialTree.html#a0">binomialTree::binomialTree</a>(<span class="keyword">const</span> <a class="code" href="classasset.html">asset</a>&amp; theStock, 
00039                                                    <a class="code" href="classyieldCurve.html">yieldCurve</a>&amp; yc, 
00040                                                    <a class="code" href="types_8h.html#a10">Real</a> T, 
00041                                                    <a class="code" href="types_8h.html#a7">Natural</a> n) :
00042 _So(theStock.getPrice()), _sigma(theStock.GetVolatility()), 
00043 _maturity(T), _n(n), 
00044 _stockProcess(n + 1),
00045 _claimProcess(n + 1),
00046 _discountFactor(n),
00047 _q(n) {
00048         <a class="code" href="classbinomialTree.html#r4">_dt</a> = T/n;
00049         <a class="code" href="classbinomialTree.html#r5">_u</a> = exp(<a class="code" href="classbinomialTree.html#r1">_sigma</a> * sqrt(<a class="code" href="classbinomialTree.html#r4">_dt</a>));
00050         <a class="code" href="classbinomialTree.html#r6">_d</a> = 1/<a class="code" href="classbinomialTree.html#r5">_u</a>;
00051 
00052         <a class="code" href="classbinomialTree.html#b6">setClaimVariables</a>(yc);
00053         <a class="code" href="classbinomialTree.html#b5">constructStockProcess</a>();
00054 }
00055 
<a name="l00056"></a><a class="code" href="classbinomialTree.html#a2">00056</a> <a class="code" href="classbinomialTree.html#a0">binomialTree::binomialTree</a>(<a class="code" href="types_8h.html#a10">Real</a> So, 
00057                                                    <a class="code" href="types_8h.html#a10">Real</a> r, 
00058                                                    <a class="code" href="types_8h.html#a10">Real</a> sigma, 
00059                                                    <a class="code" href="types_8h.html#a10">Real</a> T, 
00060                                                    <a class="code" href="types_8h.html#a7">Natural</a> n, 
00061                                                    <a class="code" href="types_8h.html#a10">Real</a> u, 
00062                                                    <a class="code" href="types_8h.html#a10">Real</a> d) :
00063 _So(So), _sigma(sigma), _maturity(T), _n(n), _u(u), _d(d), 
00064 _stockProcess(n + 1), 
00065 _claimProcess(n + 1),
00066 _discountFactor(n), 
00067 _q(n) {
00068         <a class="code" href="classbinomialTree.html#r4">_dt</a> = T/n;
00069         <a class="code" href="classbinomialTree.html#b6">setClaimVariables</a>(<a class="code" href="ParkMiller_8h.html#a3">r</a>);
00070         <a class="code" href="classbinomialTree.html#b5">constructStockProcess</a>();
00071 }
00072 
00073 <span class="keywordtype">void</span> 
<a name="l00074"></a><a class="code" href="classbinomialTree.html#b6">00074</a> <a class="code" href="classbinomialTree.html#b6">binomialTree::setClaimVariables</a>(<a class="code" href="types_8h.html#a10">Real</a> constantRate) {
00075         <a class="code" href="types_8h.html#a10">Real</a> df = exp(-1 * constantRate * <a class="code" href="classbinomialTree.html#r4">_dt</a>);
00076         <a class="code" href="types_8h.html#a10">Real</a> <a class="code" href="ParkMiller_8h.html#a2">q</a> = (exp(constantRate * _dt) - <a class="code" href="classbinomialTree.html#r6">_d</a>)/(<a class="code" href="classbinomialTree.html#r5">_u</a> - <a class="code" href="classbinomialTree.html#r6">_d</a>);
00077         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> timestep = 0; timestep &lt; <a class="code" href="classbinomialTree.html#r3">_n</a>; timestep++) {
00078                 <a class="code" href="classbinomialTree.html#r9">_discountFactor</a>[timestep] = df;
00079                 <a class="code" href="classbinomialTree.html#r10">_q</a>[timestep] = <a class="code" href="ParkMiller_8h.html#a2">q</a>;
00080         }
00081 }
00082 
00083 <span class="keywordtype">void</span>
<a name="l00084"></a><a class="code" href="classbinomialTree.html#b7">00084</a> <a class="code" href="classbinomialTree.html#b6">binomialTree::setClaimVariables</a>(<a class="code" href="classyieldCurve.html">yieldCurve</a>&amp; yc) {
00085         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> timestep = 0; timestep &lt; <a class="code" href="classbinomialTree.html#r3">_n</a>; timestep++) {
00086                 <a class="code" href="classbinomialTree.html#r9">_discountFactor</a>[timestep] = yc.<a class="code" href="classyieldCurve.html#a14">forwardDiscountFactor</a>(timestep * <a class="code" href="classbinomialTree.html#r4">_dt</a>, _dt);
00087                 <a class="code" href="classbinomialTree.html#r10">_q</a>[timestep] = ((1/<a class="code" href="classbinomialTree.html#r9">_discountFactor</a>[timestep]) - <a class="code" href="classbinomialTree.html#r6">_d</a>)/(<a class="code" href="classbinomialTree.html#r5">_u</a> - <a class="code" href="classbinomialTree.html#r6">_d</a>);
00088         }
00089 }
00090 
<a name="l00091"></a><a class="code" href="classbinomialTree.html#a4">00091</a> <a class="code" href="classbinomialTree.html#a0">binomialTree::binomialTree</a>(<span class="keyword">const</span> <a class="code" href="classbinomialTree.html">binomialTree</a> &amp;rhs) {
00092         <a class="code" href="classbinomialTree.html#d0">copyObj</a>(rhs);
00093 }
00094 
00095 <a class="code" href="classbinomialTree.html">binomialTree</a> &amp;
<a name="l00096"></a><a class="code" href="classbinomialTree.html#a5">00096</a> <a class="code" href="classbinomialTree.html#a5">binomialTree::operator=</a>(<span class="keyword">const</span> <a class="code" href="classbinomialTree.html">binomialTree</a> &amp;rhs) {
00097         <a class="code" href="classbinomialTree.html#d0">copyObj</a>(rhs);
00098         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00099 }
00100 
00101 <span class="keywordtype">void</span>
<a name="l00102"></a><a class="code" href="classbinomialTree.html#d0">00102</a> <a class="code" href="classbinomialTree.html#d0">binomialTree::copyObj</a>(<span class="keyword">const</span> <a class="code" href="classbinomialTree.html">binomialTree</a> &amp;rhs) {
00103         <a class="code" href="classbinomialTree.html#r0">_So</a> = rhs.<a class="code" href="classbinomialTree.html#r0">_So</a>;
00104         <a class="code" href="classbinomialTree.html#r1">_sigma</a> = rhs.<a class="code" href="classbinomialTree.html#r1">_sigma</a>;
00105         _maturity = rhs.<a class="code" href="classbinomialTree.html#r2">_maturity</a>;
00106         <a class="code" href="classbinomialTree.html#r3">_n</a> = rhs.<a class="code" href="classbinomialTree.html#r3">_n</a>;
00107         <a class="code" href="classbinomialTree.html#r4">_dt</a> = rhs.<a class="code" href="classbinomialTree.html#r4">_dt</a>;
00108         <a class="code" href="classbinomialTree.html#r5">_u</a> = rhs.<a class="code" href="classbinomialTree.html#r5">_u</a>;
00109         <a class="code" href="classbinomialTree.html#r6">_d</a> = rhs.<a class="code" href="classbinomialTree.html#r6">_d</a>;
00110         <a class="code" href="classbinomialTree.html#r9">_discountFactor</a> = rhs.<a class="code" href="classbinomialTree.html#r9">_discountFactor</a>;
00111         <a class="code" href="classbinomialTree.html#r7">_stockProcess</a> = rhs.<a class="code" href="classbinomialTree.html#r7">_stockProcess</a>;
00112         <a class="code" href="classbinomialTree.html#r8">_claimProcess</a> = rhs.<a class="code" href="classbinomialTree.html#r8">_claimProcess</a>;
00113         <a class="code" href="classbinomialTree.html#r9">_discountFactor</a> = rhs.<a class="code" href="classbinomialTree.html#r9">_discountFactor</a>;
00114         <a class="code" href="classbinomialTree.html#r10">_q</a> = rhs.<a class="code" href="classbinomialTree.html#r10">_q</a>;
00115 }
00116 
<a name="l00117"></a><a class="code" href="classbinomialTree.html#a6">00117</a> <a class="code" href="classbinomialTree.html#a6">binomialTree::~binomialTree</a>(<span class="keywordtype">void</span>) { 
00118 
00119 }
00120 
00121 <span class="keywordtype">void</span>
<a name="l00122"></a><a class="code" href="classbinomialTree.html#b5">00122</a> <a class="code" href="classbinomialTree.html#b5">binomialTree::constructStockProcess</a>(<span class="keywordtype">void</span>) {
00123         <span class="comment">// set root node to initial stock price, dimension claim process but set</span>
00124         <span class="comment">// all values to zero</span>
00125         <a class="code" href="classbinomialTree.html#r7">_stockProcess</a>[0].resize(1, <a class="code" href="classbinomialTree.html#r0">_So</a>);
00126         <a class="code" href="classbinomialTree.html#r8">_claimProcess</a>[0].resize(1, 0);
00127 
00128         <span class="comment">// iterate forward in time, applying the appropriate multipliers</span>
00129         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> i = 1; i &lt;= <a class="code" href="classbinomialTree.html#r3">_n</a>; i++) {
00130                 <a class="code" href="classbinomialTree.html#r7">_stockProcess</a>[i].resize(i + 1);
00131                 <a class="code" href="classbinomialTree.html#r8">_claimProcess</a>[i].resize(i + 1, 0);
00132 
00133                 <a class="code" href="classbinomialTree.html#r7">_stockProcess</a>[i][0] = <a class="code" href="classbinomialTree.html#r7">_stockProcess</a>[i - 1][0] * <a class="code" href="classbinomialTree.html#r6">_d</a>;
00134                 <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> j = 1; j &lt;= i; j++) {
00135                         _stockProcess[i][j] = _stockProcess[i - 1][j - 1] * <a class="code" href="classbinomialTree.html#r5">_u</a>;
00136                 }
00137         }
00138 }
00139 
00140 <span class="keyword">const</span> valarray&lt;Real&gt;* 
<a name="l00141"></a><a class="code" href="classbinomialTree.html#a7">00141</a> <a class="code" href="classbinomialTree.html#a7">binomialTree::getStockProcess</a>(<a class="code" href="types_8h.html#a7">Natural</a> step) {
00142         valarray&lt;Real&gt; *result = 
00143                 (step &lt;= <a class="code" href="classbinomialTree.html#r3">_n</a> ? &amp;<a class="code" href="classbinomialTree.html#r7">_stockProcess</a>[step] : NULL);
00144 
00145         <span class="keywordflow">return</span> result;
00146 }
00147 
00148 <span class="keyword">const</span> valarray&lt;Real&gt;* 
<a name="l00149"></a><a class="code" href="classbinomialTree.html#a8">00149</a> <a class="code" href="classbinomialTree.html#a8">binomialTree::getClaimProcess</a>(<a class="code" href="types_8h.html#a7">Natural</a> step) {
00150         valarray&lt;Real&gt; *result = 
00151                 (step &lt;= <a class="code" href="classbinomialTree.html#r3">_n</a> ? &amp;<a class="code" href="classbinomialTree.html#r8">_claimProcess</a>[step] : NULL);
00152 
00153         <span class="keywordflow">return</span> result;
00154 }
00155 
00156 <a class="code" href="types_8h.html#a10">Real</a>
<a name="l00157"></a><a class="code" href="classbinomialTree.html#a9">00157</a> <a class="code" href="classbinomialTree.html#a9">binomialTree::getPrice</a>() {
00158         <span class="keywordflow">return</span> (<a class="code" href="classbinomialTree.html#r3">_n</a> &gt; 0 ? <a class="code" href="classbinomialTree.html#r8">_claimProcess</a>[0][0] : 0);
00159 }
00160 
00161 ostream&amp; 
<a name="l00162"></a><a class="code" href="binomialTree_8cpp.html#a0">00162</a> <a class="code" href="convertiblebond_8cpp.html#a0">operator &lt;&lt; </a>(ostream &amp;os, <span class="keyword">const</span> <a class="code" href="classbinomialTree.html">binomialTree</a> &amp;bt) {
00163         os &lt;&lt; <span class="stringliteral">"binomialtree parameters - "</span> &lt;&lt; endl 
00164                 &lt;&lt; <span class="stringliteral">" So = "</span> &lt;&lt; bt.<a class="code" href="classbinomialTree.html#b0">getSo</a>()
00165                 &lt;&lt; <span class="stringliteral">", sigma = "</span> &lt;&lt; bt.<a class="code" href="classbinomialTree.html#b2">getSigma</a>()
00166                 &lt;&lt; <span class="stringliteral">", maturity = "</span> &lt;&lt; bt.<a class="code" href="classbinomialTree.html#b3">getMaturity</a>() &lt;&lt; endl
00167                 &lt;&lt; <span class="stringliteral">" steps = "</span> &lt;&lt; bt.<a class="code" href="classbinomialTree.html#b4">getSteps</a>() 
00168                 &lt;&lt; <span class="stringliteral">", u = "</span> &lt;&lt; bt.<a class="code" href="classbinomialTree.html#r5">_u</a>
00169                 &lt;&lt; <span class="stringliteral">", d = "</span> &lt;&lt; bt.<a class="code" href="classbinomialTree.html#r6">_d</a> &lt;&lt; endl
00170                 &lt;&lt; <span class="stringliteral">" discountFactors: "</span> &lt;&lt; <a class="code" href="utils_8h.html#a10">valarrayRealToString</a>(bt.<a class="code" href="classbinomialTree.html#r9">_discountFactor</a>) &lt;&lt; endl
00171                 &lt;&lt; <span class="stringliteral">" q (up move prob): "</span> &lt;&lt; <a class="code" href="utils_8h.html#a10">valarrayRealToString</a>(bt.<a class="code" href="classbinomialTree.html#r10">_q</a>) &lt;&lt; endl &lt;&lt; endl;
00172 
00173         os &lt;&lt; <span class="stringliteral">"stock process"</span> &lt;&lt; endl;
00174         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> timestep = 0; timestep &lt;= bt.<a class="code" href="classbinomialTree.html#r3">_n</a>; timestep++) {
00175                 os &lt;&lt; bt.<a class="code" href="classbinomialTree.html#r7">_stockProcess</a>[timestep][0];
00176                 <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> branch = 1; branch &lt;= timestep; branch++) {
00177                         os &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; bt.<a class="code" href="classbinomialTree.html#r7">_stockProcess</a>[timestep][branch];
00178                 }
00179                 os &lt;&lt; endl;
00180         }
00181 
00182         os &lt;&lt; <span class="stringliteral">"claim process (price at the top)"</span> &lt;&lt; endl;
00183         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> timestep = 0; timestep &lt;= bt.<a class="code" href="classbinomialTree.html#r3">_n</a>; timestep++) {
00184                 os &lt;&lt; bt.<a class="code" href="classbinomialTree.html#r8">_claimProcess</a>[timestep][0];
00185                 <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> branch = 1; branch &lt;= timestep; branch++) {
00186                         os &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; bt.<a class="code" href="classbinomialTree.html#r8">_claimProcess</a>[timestep][branch];
00187                 }
00188                 os &lt;&lt; endl;
00189         }
00190 
00191         <span class="keywordflow">return</span> os;
00192 }
00193 
00194 <span class="keywordtype">void</span>
<a name="l00195"></a><a class="code" href="classbinomialTree.html#a11">00195</a> <a class="code" href="classbinomialTree.html#a11">binomialTree::runEngineCall</a>(<a class="code" href="classPayOff.html">PayOff</a> thePayoff) {
00196         <span class="comment">// check payoff at leaf nodes</span>
00197         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> branch = 0; branch &lt;= <a class="code" href="classbinomialTree.html#r3">_n</a>; branch++) {
00198                 <a class="code" href="classbinomialTree.html#r8">_claimProcess</a>[_n][branch] =
00199                         thePayoff.<a class="code" href="classPayOff.html#a5">Call</a>(<a class="code" href="classbinomialTree.html#r7">_stockProcess</a>[_n][branch]);
00200         }
00201 
00202         <span class="comment">// now work backwards discounting expected values</span>
00203         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a6">Integer</a> timestep = _n - 1; timestep &gt;= 0; timestep--) {
00204                 <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a6">Integer</a> branch = 0; branch &lt;= timestep; branch++) {
00205                         <a class="code" href="classbinomialTree.html#r8">_claimProcess</a>[timestep][branch] = 
00206                                 <a class="code" href="classbinomialTree.html#r9">_discountFactor</a>[timestep] * 
00207                                 ((<a class="code" href="classbinomialTree.html#r10">_q</a>[timestep] * <a class="code" href="classbinomialTree.html#r8">_claimProcess</a>[timestep + 1][branch + 1]) +
00208                                 ((1 - _q[timestep]) * _claimProcess[timestep + 1][branch]));
00209                 }
00210         }
00211 }
00212 
00213 <span class="keywordtype">void</span>
<a name="l00214"></a><a class="code" href="classbinomialTree.html#a10">00214</a> <a class="code" href="classbinomialTree.html#a10">binomialTree::runEngineConvertibleBond</a>(<a class="code" href="classPayOff.html">PayOff</a> thePayoff, 
00215                                                                            <a class="code" href="types_8h.html#a10">Real</a> ConversionRatio,
00216                                                                            <a class="code" href="types_8h.html#a10">Real</a> CallPrice,
00217                                                                            <a class="code" href="types_8h.html#a10">Real</a> PutPrice) {
00218     <span class="comment">// check payoff at leaf nodes - don't apply call/putprice</span>
00219         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a7">Natural</a> branch = 0; branch &lt;= <a class="code" href="classbinomialTree.html#r3">_n</a>; branch++) {
00220                 <a class="code" href="classbinomialTree.html#r8">_claimProcess</a>[_n][branch] = 
00221                         thePayoff.<a class="code" href="classPayOff.html#a23">Convertible</a>(
00222                                 <a class="code" href="classbinomialTree.html#r7">_stockProcess</a>[_n][branch], ConversionRatio, 100);
00223         }
00224 
00225         <span class="comment">// now work back through the tree</span>
00226         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a6">Integer</a> timestep = _n - 1; timestep &gt;= 0; timestep--) {
00227                 <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a6">Integer</a> branch = 0; branch &lt;= timestep; branch++) {
00228 
00229                         <span class="comment">// first calculate bond price as discounted expected value</span>
00230                         <a class="code" href="classbinomialTree.html#r8">_claimProcess</a>[timestep][branch] = 
00231                                 <a class="code" href="classbinomialTree.html#r9">_discountFactor</a>[timestep] * 
00232                                 ((<a class="code" href="classbinomialTree.html#r10">_q</a>[timestep] * <a class="code" href="classbinomialTree.html#r8">_claimProcess</a>[timestep + 1][branch + 1]) +
00233                                 ((1 - _q[timestep]) * _claimProcess[timestep + 1][branch]));
00234 
00235                         <span class="comment">// now check other possibilities unique to convertibles:</span>
00236                         <span class="comment">//  conversion to stock, call, put</span>
00237                         _claimProcess[timestep][branch] = 
00238                                 thePayoff.<a class="code" href="classPayOff.html#a23">Convertible</a>(<a class="code" href="classbinomialTree.html#r7">_stockProcess</a>[timestep][branch], 
00239                                         ConversionRatio, 
00240                                         _claimProcess[timestep][branch], 
00241                                         CallPrice, 
00242                                         PutPrice);
00243                 } <span class="comment">// for each branch</span>
00244         } <span class="comment">// for times from n -1 to 0</span>
00245 }
</pre></div><hr size="1"><address style="align: right;"><small>
<b>Note: Generated nightly - reload for latest version</b><br>
Generated on Thu Dec 22 13:21:43 2005 for <a href="http://terreneuve.sourceforge.net">terreneuve</a> by <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0></a> 1.3.6</small></address>
</body>
</html>
