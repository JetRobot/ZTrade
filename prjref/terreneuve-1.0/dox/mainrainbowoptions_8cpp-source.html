<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mainrainbowoptions.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>mainrainbowoptions.cpp</h1><a href="mainrainbowoptions_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include "../Interface/main.h"</span>
00002 <span class="preprocessor">#include "../PartI/rainbowoption.h"</span>
00003 <span class="preprocessor">#include"../PartB/YieldCurve.h"</span>
00004 
00005 <span class="preprocessor">#include&lt;iostream&gt;</span>
00006 <span class="preprocessor">#include&lt;valarray&gt;</span>
00007 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00008 
<a name="l00013"></a><a class="code" href="mainrainbowoptions_8cpp.html#a0">00013</a> <span class="keywordtype">bool</span> <a class="code" href="testObjects_8h.html#a13">mainrainbowoptions</a>(<span class="keywordtype">void</span>){
00014         cout&lt;&lt;<span class="stringliteral">"Test Rainbows with S1=100, S2=120, K=110, vols at 0.20, rates at 0.10 for 1 Year - correl at 0.5"</span>&lt;&lt;endl;
00015         <a class="code" href="classDate.html">Date</a> start=<a class="code" href="classDate.html">Date</a>();
00016         start.<a class="code" href="classDate.html#a13">setDateToToday</a>();
00017         <a class="code" href="types_8h.html#a10">Real</a> exp=1.0;<span class="comment">//1Y option</span>
00018         <a class="code" href="types_8h.html#a10">Real</a> Strike=110;
00019         <a class="code" href="classyieldCurve.html">yieldCurve</a> yc=<a class="code" href="classyieldCurve.html">yieldCurve</a>(0.1);
00020         <a class="code" href="classvolsurface.html">volsurface</a> v1=<a class="code" href="classvolsurface.html">volsurface</a>(0.2);
00021         volsurface v2=volsurface(0.2);
00022         valarray&lt;volsurface&gt; vols(2);
00023         vols[0]=v1;
00024         vols[1]=v2;
00025         <a class="code" href="types_8h.html#a10">Real</a> Spot1=100;
00026         <a class="code" href="types_8h.html#a10">Real</a> Spot2=120;
00027         <a class="code" href="types_8h.html#a10">Real</a> Mult=1;
00028         <a class="code" href="types_8h.html#a10">Real</a> Correl12=0.5;
00029         <a class="code" href="types_8h.html#a10">Real</a> weight1=1;
00030         <a class="code" href="types_8h.html#a10">Real</a> weight2=1;
00031         <span class="keywordtype">bool</span> outputmsg=<span class="keyword">false</span>;
00032 
00033         <a class="code" href="types_8h.html#a10">Real</a> tempPrice=0.0;
00034 
00035         <span class="comment">/*      Types   (MonteCarlo,    ClosedForm      )</span>
00036 <span class="comment">                SpreadOptionMax,        AssetsBasketMax,        BestOf2AssetsCash,      WorstOf2AssetsCash,     BetterOf2Assets,</span>
00037 <span class="comment">                WorseOf2Assets,         Max2AssetsCall,         Min2AssetsCall,         Max2AssetsPut,          Min2AssetsPut</span>
00038 <span class="comment">        */</span>
00039         <a class="code" href="classRainbowOption.html">RainbowOption</a> rb1=<a class="code" href="classRainbowOption.html">RainbowOption</a>(<a class="code" href="rainbowoption_8h.html#a23a12">SpreadOptionMax</a>,start,exp,Strike,yc,vols,Spot1,Spot2,Mult,Correl12,weight1,weight2,outputmsg);
00040         RainbowOption rb2;<span class="comment">// used for specific producs to adjust the strike</span>
00041 
00042 <span class="comment">//       no closed form</span>
00043         cout&lt;&lt;<span class="stringliteral">"No closed form solution for these"</span>&lt;&lt;endl;
00044         <span class="comment">//this one will be used for spread to have a reasonnable strike for the spread</span>
00045         rb2=RainbowOption(<a class="code" href="rainbowoption_8h.html#a23a12">SpreadOptionMax</a>,start,exp,0.0,yc,vols,Spot1,Spot2,Mult,Correl12,weight1,weight2,outputmsg);
00046 
00047         tempPrice=rb2.<a class="code" href="classRainbowOption.html#a4">getPrice</a>();
00048         cout&lt;&lt;<span class="stringliteral">"Price2SpreadOptionMaxByMC - (Strike = 0.0) : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00049         cout&lt;&lt;<span class="stringliteral">"delta 1: "</span>&lt;&lt;rb2.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(1)&lt;&lt;endl;
00050         cout&lt;&lt;<span class="stringliteral">"delta 2: "</span>&lt;&lt;rb2.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(2)&lt;&lt;endl;
00051         cout&lt;&lt;<span class="stringliteral">"gamma 1: "</span>&lt;&lt;rb2.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(1)&lt;&lt;endl;
00052         cout&lt;&lt;<span class="stringliteral">"gamma 2: "</span>&lt;&lt;rb2.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(2)&lt;&lt;endl;
00053         cout&lt;&lt;<span class="stringliteral">"vega 1: "</span>&lt;&lt;rb2.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(1)&lt;&lt;endl;
00054         cout&lt;&lt;<span class="stringliteral">"vega 2: "</span>&lt;&lt;rb2.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(2)&lt;&lt;endl;
00055         cout&lt;&lt;<span class="stringliteral">"correl risk : "</span>&lt;&lt;rb2.<a class="code" href="classRainbowOption.html#a11">getCorrelRisk</a>()&lt;&lt;endl;
00056         cout&lt;&lt;<span class="stringliteral">"Rho : "</span>&lt;&lt;rb2.<a class="code" href="classRainbowOption.html#a12">getRho</a>()&lt;&lt;endl;
00057 
00058         rb1.<a class="code" href="classRainbowOption.html#a15">setRainbowType</a>(<a class="code" href="rainbowoption_8h.html#a23a13">AssetsBasketMax</a>);
00059         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>();
00060         cout&lt;&lt;<span class="stringliteral">"Price2AssetsBasketMaxByMC : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00061         cout&lt;&lt;<span class="stringliteral">"delta 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(1)&lt;&lt;endl;
00062         cout&lt;&lt;<span class="stringliteral">"delta 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(2)&lt;&lt;endl;
00063         cout&lt;&lt;<span class="stringliteral">"gamma 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(1)&lt;&lt;endl;
00064         cout&lt;&lt;<span class="stringliteral">"gamma 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(2)&lt;&lt;endl;
00065         cout&lt;&lt;<span class="stringliteral">"vega 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(1)&lt;&lt;endl;
00066         cout&lt;&lt;<span class="stringliteral">"vega 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(2)&lt;&lt;endl;
00067         cout&lt;&lt;<span class="stringliteral">"correl risk : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a11">getCorrelRisk</a>()&lt;&lt;endl;
00068         cout&lt;&lt;<span class="stringliteral">"Rho : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a12">getRho</a>()&lt;&lt;endl;
00069         
00070         <span class="comment">//did not find closed form, should be one</span>
00071         cout&lt;&lt;<span class="stringliteral">"\nWorstOf2AssetsCash"</span>&lt;&lt;endl;
00072         rb1.<a class="code" href="classRainbowOption.html#a15">setRainbowType</a>(<a class="code" href="rainbowoption_8h.html#a23a15">WorstOf2AssetsCash</a>);
00073         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>();
00074         cout&lt;&lt;<span class="stringliteral">"PriceWorstOf2AssetsCashByMC : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00075         cout&lt;&lt;<span class="stringliteral">"delta 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(1)&lt;&lt;endl;
00076         cout&lt;&lt;<span class="stringliteral">"delta 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(2)&lt;&lt;endl;
00077         cout&lt;&lt;<span class="stringliteral">"gamma 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(1)&lt;&lt;endl;
00078         cout&lt;&lt;<span class="stringliteral">"gamma 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(2)&lt;&lt;endl;
00079         cout&lt;&lt;<span class="stringliteral">"vega 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(1)&lt;&lt;endl;
00080         cout&lt;&lt;<span class="stringliteral">"vega 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(2)&lt;&lt;endl;
00081         cout&lt;&lt;<span class="stringliteral">"correl risk : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a11">getCorrelRisk</a>()&lt;&lt;endl;
00082         cout&lt;&lt;<span class="stringliteral">"Rho : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a12">getRho</a>()&lt;&lt;endl;
00083 
00084         <span class="comment">//comparisons</span>
00085         cout&lt;&lt;<span class="stringliteral">"\nCompare Best Of 2 Assets plus cash"</span>&lt;&lt;endl;
00086         rb1.<a class="code" href="classRainbowOption.html#a15">setRainbowType</a>(<a class="code" href="rainbowoption_8h.html#a23a14">BestOf2AssetsCash</a>);
00087         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a10">MonteCarlo</a>);
00088         cout&lt;&lt;<span class="stringliteral">"PriceBestOf2AssetsCashByMC 1: "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00089         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a11">ClosedForm</a>);
00090         cout&lt;&lt;<span class="stringliteral">"PriceByClosedForm_BestOf2_plusCash : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00091         cout&lt;&lt;<span class="stringliteral">"delta 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(1)&lt;&lt;endl;
00092         cout&lt;&lt;<span class="stringliteral">"delta 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(2)&lt;&lt;endl;
00093         cout&lt;&lt;<span class="stringliteral">"gamma 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(1)&lt;&lt;endl;
00094         cout&lt;&lt;<span class="stringliteral">"gamma 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(2)&lt;&lt;endl;
00095         cout&lt;&lt;<span class="stringliteral">"vega 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(1)&lt;&lt;endl;
00096         cout&lt;&lt;<span class="stringliteral">"vega 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(2)&lt;&lt;endl;
00097         cout&lt;&lt;<span class="stringliteral">"correl risk : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a11">getCorrelRisk</a>()&lt;&lt;endl;
00098         cout&lt;&lt;<span class="stringliteral">"Rho : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a12">getRho</a>()&lt;&lt;endl;
00099 
00100         cout&lt;&lt;<span class="stringliteral">"\nCompare Max Of 2 Assets Call"</span>&lt;&lt;endl;
00101         rb1.<a class="code" href="classRainbowOption.html#a15">setRainbowType</a>(<a class="code" href="rainbowoption_8h.html#a23a18">Max2AssetsCall</a>);
00102         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a10">MonteCarlo</a>);
00103         cout&lt;&lt;<span class="stringliteral">"PriceMax2AssetsByMCCall : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00104         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a11">ClosedForm</a>);
00105         cout&lt;&lt;<span class="stringliteral">"PriceByClosedForm_MaxOf2_call : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00106         cout&lt;&lt;<span class="stringliteral">"delta 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(1)&lt;&lt;endl;
00107         cout&lt;&lt;<span class="stringliteral">"delta 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(2)&lt;&lt;endl;
00108         cout&lt;&lt;<span class="stringliteral">"gamma 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(1)&lt;&lt;endl;
00109         cout&lt;&lt;<span class="stringliteral">"gamma 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(2)&lt;&lt;endl;
00110         cout&lt;&lt;<span class="stringliteral">"vega 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(1)&lt;&lt;endl;
00111         cout&lt;&lt;<span class="stringliteral">"vega 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(2)&lt;&lt;endl;
00112         cout&lt;&lt;<span class="stringliteral">"correl risk : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a11">getCorrelRisk</a>()&lt;&lt;endl;
00113         cout&lt;&lt;<span class="stringliteral">"Rho : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a12">getRho</a>()&lt;&lt;endl;
00114 
00115         cout&lt;&lt;<span class="stringliteral">"\nCompare Min Of 2 Assets Call"</span>&lt;&lt;endl;
00116         rb1.<a class="code" href="classRainbowOption.html#a15">setRainbowType</a>(<a class="code" href="rainbowoption_8h.html#a23a19">Min2AssetsCall</a>);
00117         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a10">MonteCarlo</a>);
00118         cout&lt;&lt;<span class="stringliteral">"PriceMin2AssetsByMCCall : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00119         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a11">ClosedForm</a>);
00120         cout&lt;&lt;<span class="stringliteral">"PriceByClosedForm_MinOf2_call : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00121         cout&lt;&lt;<span class="stringliteral">"delta 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(1)&lt;&lt;endl;
00122         cout&lt;&lt;<span class="stringliteral">"delta 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(2)&lt;&lt;endl;
00123         cout&lt;&lt;<span class="stringliteral">"gamma 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(1)&lt;&lt;endl;
00124         cout&lt;&lt;<span class="stringliteral">"gamma 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(2)&lt;&lt;endl;
00125         cout&lt;&lt;<span class="stringliteral">"vega 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(1)&lt;&lt;endl;
00126         cout&lt;&lt;<span class="stringliteral">"vega 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(2)&lt;&lt;endl;
00127         cout&lt;&lt;<span class="stringliteral">"correl risk : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a11">getCorrelRisk</a>()&lt;&lt;endl;
00128         cout&lt;&lt;<span class="stringliteral">"Rho : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a12">getRho</a>()&lt;&lt;endl;
00129 
00130         cout&lt;&lt;<span class="stringliteral">"\nCompare Max Of 2 Assets Put"</span>&lt;&lt;endl;
00131         rb1.<a class="code" href="classRainbowOption.html#a15">setRainbowType</a>(<a class="code" href="rainbowoption_8h.html#a23a20">Max2AssetsPut</a>);
00132         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a10">MonteCarlo</a>);
00133         cout&lt;&lt;<span class="stringliteral">"PriceMax2AssetsByMCPut : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00134         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a11">ClosedForm</a>);
00135         cout&lt;&lt;<span class="stringliteral">"PriceByClosedForm_MaxOf2_put : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00136         cout&lt;&lt;<span class="stringliteral">"delta 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(1)&lt;&lt;endl;
00137         cout&lt;&lt;<span class="stringliteral">"delta 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(2)&lt;&lt;endl;
00138         cout&lt;&lt;<span class="stringliteral">"gamma 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(1)&lt;&lt;endl;
00139         cout&lt;&lt;<span class="stringliteral">"gamma 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(2)&lt;&lt;endl;
00140         cout&lt;&lt;<span class="stringliteral">"vega 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(1)&lt;&lt;endl;
00141         cout&lt;&lt;<span class="stringliteral">"vega 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(2)&lt;&lt;endl;
00142         cout&lt;&lt;<span class="stringliteral">"correl risk : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a11">getCorrelRisk</a>()&lt;&lt;endl;
00143         cout&lt;&lt;<span class="stringliteral">"Rho : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a12">getRho</a>()&lt;&lt;endl;
00144 
00145         cout&lt;&lt;<span class="stringliteral">"\nCompare Min Of 2 Assets Put"</span>&lt;&lt;endl;
00146         rb1.<a class="code" href="classRainbowOption.html#a15">setRainbowType</a>(<a class="code" href="rainbowoption_8h.html#a23a21">Min2AssetsPut</a>);
00147         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a10">MonteCarlo</a>);
00148         cout&lt;&lt;<span class="stringliteral">"PriceMin2AssetsByMCPut : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00149         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a11">ClosedForm</a>);
00150         cout&lt;&lt;<span class="stringliteral">"PriceByClosedForm_MinOf2_put : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00151         cout&lt;&lt;<span class="stringliteral">"delta 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(1)&lt;&lt;endl;
00152         cout&lt;&lt;<span class="stringliteral">"delta 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(2)&lt;&lt;endl;
00153         cout&lt;&lt;<span class="stringliteral">"gamma 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(1)&lt;&lt;endl;
00154         cout&lt;&lt;<span class="stringliteral">"gamma 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(2)&lt;&lt;endl;
00155         cout&lt;&lt;<span class="stringliteral">"vega 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(1)&lt;&lt;endl;
00156         cout&lt;&lt;<span class="stringliteral">"vega 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(2)&lt;&lt;endl;
00157         cout&lt;&lt;<span class="stringliteral">"correl risk : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a11">getCorrelRisk</a>()&lt;&lt;endl;
00158         cout&lt;&lt;<span class="stringliteral">"Rho : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a12">getRho</a>()&lt;&lt;endl;
00159         
00160         cout&lt;&lt;<span class="stringliteral">"\nCompare Better of 2"</span>&lt;&lt;endl;
00161         rb1.<a class="code" href="classRainbowOption.html#a15">setRainbowType</a>(<a class="code" href="rainbowoption_8h.html#a23a16">BetterOf2Assets</a>);
00162         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a10">MonteCarlo</a>);
00163         cout&lt;&lt;<span class="stringliteral">"PriceByMc_BetterOf2Assets : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00164         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a11">ClosedForm</a>);
00165         cout&lt;&lt;<span class="stringliteral">"PriceByClosedForm_BetterOf2 : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00166         cout&lt;&lt;<span class="stringliteral">"delta 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(1)&lt;&lt;endl;
00167         cout&lt;&lt;<span class="stringliteral">"delta 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(2)&lt;&lt;endl;
00168         cout&lt;&lt;<span class="stringliteral">"gamma 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(1)&lt;&lt;endl;
00169         cout&lt;&lt;<span class="stringliteral">"gamma 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(2)&lt;&lt;endl;
00170         cout&lt;&lt;<span class="stringliteral">"vega 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(1)&lt;&lt;endl;
00171         cout&lt;&lt;<span class="stringliteral">"vega 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(2)&lt;&lt;endl;
00172         cout&lt;&lt;<span class="stringliteral">"correl risk : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a11">getCorrelRisk</a>()&lt;&lt;endl;
00173         cout&lt;&lt;<span class="stringliteral">"Rho : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a12">getRho</a>()&lt;&lt;endl;
00174 
00175         cout&lt;&lt;<span class="stringliteral">"\nCompare Worse of 2"</span>&lt;&lt;endl;
00176         rb1.<a class="code" href="classRainbowOption.html#a15">setRainbowType</a>(<a class="code" href="rainbowoption_8h.html#a23a17">WorseOf2Assets</a>);
00177         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a10">MonteCarlo</a>);
00178         cout&lt;&lt;<span class="stringliteral">"PriceByMc_WorseOf2Assets : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00179         tempPrice=rb1.<a class="code" href="classRainbowOption.html#a4">getPrice</a>(<a class="code" href="rainbowoption_8h.html#a22a11">ClosedForm</a>);
00180         cout&lt;&lt;<span class="stringliteral">"PriceByClosedForm_WorseOf2 : "</span>&lt;&lt;tempPrice&lt;&lt;endl;
00181         cout&lt;&lt;<span class="stringliteral">"delta 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(1)&lt;&lt;endl;
00182         cout&lt;&lt;<span class="stringliteral">"delta 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a5">getPartialDelta</a>(2)&lt;&lt;endl;
00183         cout&lt;&lt;<span class="stringliteral">"gamma 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(1)&lt;&lt;endl;
00184         cout&lt;&lt;<span class="stringliteral">"gamma 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a6">getPartialGamma</a>(2)&lt;&lt;endl;
00185         cout&lt;&lt;<span class="stringliteral">"vega 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(1)&lt;&lt;endl;
00186         cout&lt;&lt;<span class="stringliteral">"vega 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(2)&lt;&lt;endl;
00187         cout&lt;&lt;<span class="stringliteral">"vega 1: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(1,<a class="code" href="rainbowoption_8h.html#a22a10">MonteCarlo</a>)&lt;&lt;endl;
00188         cout&lt;&lt;<span class="stringliteral">"vega 2: "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a7">getPartialVega</a>(2,<a class="code" href="rainbowoption_8h.html#a22a10">MonteCarlo</a>)&lt;&lt;endl;
00189         cout&lt;&lt;<span class="stringliteral">"correl risk : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a11">getCorrelRisk</a>()&lt;&lt;endl;
00190         cout&lt;&lt;<span class="stringliteral">"Rho : "</span>&lt;&lt;rb1.<a class="code" href="classRainbowOption.html#a12">getRho</a>()&lt;&lt;endl;
00191 
00192 
00193 
00194 
00195         <span class="comment">// to generate set of prices for the differences</span>
00196         <span class="comment">// 5 hours to run ...</span>
00197 
00198 <span class="comment">//      </span>
00199 <span class="comment">//      Real S1,S2,K,vol1,vol2,correl;</span>
00200 <span class="comment">//      Real price,d1,d2,g1,g2,v1,v2,rho,corr,theta;</span>
00201 <span class="comment">//      yieldCurve yctest=yieldCurve(0.05);     </span>
00202 <span class="comment">//      volsurface vs1,vs2;</span>
00203 <span class="comment">//      valarray&lt;volsurface&gt; vols(2);</span>
00204 <span class="comment">//      Date start=Date();</span>
00205 <span class="comment">//      start.setDateToToday();</span>
00206 <span class="comment">//      Real exp=2.0;//1Y option</span>
00207 <span class="comment">//</span>
00208 <span class="comment">//      RainbowOption rb2;</span>
00209 <span class="comment">//      ofstream myfile;</span>
00210 <span class="comment">//      myfile.open ("c:/resRainbow.txt");</span>
00211 <span class="comment">//      myfile&lt;&lt;"2Y Rainbow Options with 0.05 rate to maturity, one spot at 100 - Results\n";</span>
00212 <span class="comment">//      myfile&lt;&lt;"S1,S2,K,correl,vol1,vol2,Type,Method,Price,delta1,delta2,gamma1,gamma2,Vega1,Vega2,Rho,Correl,Theta\n";</span>
00213 <span class="comment">//</span>
00214 <span class="comment">//      for(S1=80;S1&lt;=120;S1+=20){</span>
00215 <span class="comment">//              for(S2=100;S2&lt;=100;S2+=10){//symetry so only one oscillation should be enough</span>
00216 <span class="comment">//                      for(K=80;K&lt;130;K+=20){</span>
00217 <span class="comment">//                              for(correl=-1;correl&lt;=1;correl+=0.5){</span>
00218 <span class="comment">//                                      for(vol1=0.1;vol1&lt;0.4;vol1+=0.1){</span>
00219 <span class="comment">//                                              for(vol2=0.2;vol2&lt;=0.2;vol2+=0.1){//symetry</span>
00220 <span class="comment">//                                                      vs1=volsurface(vol1);</span>
00221 <span class="comment">//                                                      vs2=volsurface(vol2);</span>
00222 <span class="comment">//                                                      vols[0]=vs1;</span>
00223 <span class="comment">//                                                      vols[1]=vs2;</span>
00225 <span class="comment"></span><span class="comment">//                                                      rb2=RainbowOption(BestOf2AssetsCash,start,exp,K,yctest,vols,S1,S2,1,correl,1,1,false);</span>
00226 <span class="comment">//</span>
00227 <span class="comment">//                                                      price=rb2.getPrice(MonteCarlo);</span>
00228 <span class="comment">//                                                      d1=rb2.getPartialDelta(1,MonteCarlo);</span>
00229 <span class="comment">//                                                      d2=rb2.getPartialDelta(2,MonteCarlo);</span>
00230 <span class="comment">//                                                      g1=rb2.getPartialGamma(1,MonteCarlo);</span>
00231 <span class="comment">//                                                      g2=rb2.getPartialGamma(2,MonteCarlo);</span>
00232 <span class="comment">//                                                      v1=rb2.getPartialVega(1,MonteCarlo);</span>
00233 <span class="comment">//                                                      v2=rb2.getPartialVega(2,MonteCarlo);</span>
00234 <span class="comment">//                                                      corr=rb2.getCorrelRisk(MonteCarlo);</span>
00235 <span class="comment">//                                                      rho=rb2.getRho(MonteCarlo);</span>
00236 <span class="comment">//                                                      theta=rb2.getTheta(MonteCarlo);</span>
00237 <span class="comment">//</span>
00238 <span class="comment">//                                                      myfile &lt;&lt;S1&lt;&lt;","&lt;&lt;S2&lt;&lt;","&lt;&lt;K&lt;&lt;","&lt;&lt;correl&lt;&lt;","&lt;&lt;vol1&lt;&lt;","&lt;&lt;vol2&lt;&lt;","&lt;&lt;"BOCash"&lt;&lt;","&lt;&lt;"MC"&lt;&lt;","&lt;&lt;price&lt;&lt;","&lt;&lt;d1&lt;&lt;","&lt;&lt;d2&lt;&lt;","&lt;&lt;g1&lt;&lt;","&lt;&lt;g2&lt;&lt;","&lt;&lt;v1&lt;&lt;","&lt;&lt;v2&lt;&lt;","&lt;&lt;rho&lt;&lt;","&lt;&lt;corr&lt;&lt;","&lt;&lt;theta&lt;&lt;"\n";</span>
00239 <span class="comment">//</span>
00240 <span class="comment">//                                                      price=rb2.getPrice(ClosedForm);</span>
00241 <span class="comment">//                                                      d1=rb2.getPartialDelta(1,ClosedForm);</span>
00242 <span class="comment">//                                                      d2=rb2.getPartialDelta(2,ClosedForm);</span>
00243 <span class="comment">//                                                      g1=rb2.getPartialGamma(1,ClosedForm);</span>
00244 <span class="comment">//                                                      g2=rb2.getPartialGamma(2,ClosedForm);</span>
00245 <span class="comment">//                                                      v1=rb2.getPartialVega(1,ClosedForm);</span>
00246 <span class="comment">//                                                      v2=rb2.getPartialVega(2,ClosedForm);</span>
00247 <span class="comment">//                                                      corr=rb2.getCorrelRisk(ClosedForm);</span>
00248 <span class="comment">//                                                      rho=rb2.getRho(ClosedForm);</span>
00249 <span class="comment">//                                                      theta=rb2.getTheta(ClosedForm);</span>
00250 <span class="comment">//</span>
00251 <span class="comment">//                                                      myfile &lt;&lt;S1&lt;&lt;","&lt;&lt;S2&lt;&lt;","&lt;&lt;K&lt;&lt;","&lt;&lt;correl&lt;&lt;","&lt;&lt;vol1&lt;&lt;","&lt;&lt;vol2&lt;&lt;","&lt;&lt;"BOCash"&lt;&lt;","&lt;&lt;"CF"&lt;&lt;","&lt;&lt;price&lt;&lt;","&lt;&lt;d1&lt;&lt;","&lt;&lt;d2&lt;&lt;","&lt;&lt;g1&lt;&lt;","&lt;&lt;g2&lt;&lt;","&lt;&lt;v1&lt;&lt;","&lt;&lt;v2&lt;&lt;","&lt;&lt;rho&lt;&lt;","&lt;&lt;corr&lt;&lt;","&lt;&lt;theta&lt;&lt;"\n";</span>
00252 <span class="comment">//</span>
00253 <span class="comment">//                                                      rb2.setRainbowType(Max2AssetsCall);</span>
00254 <span class="comment">//</span>
00255 <span class="comment">//                                                      price=rb2.getPrice(MonteCarlo);</span>
00256 <span class="comment">//                                                      d1=rb2.getPartialDelta(1,MonteCarlo);</span>
00257 <span class="comment">//                                                      d2=rb2.getPartialDelta(2,MonteCarlo);</span>
00258 <span class="comment">//                                                      g1=rb2.getPartialGamma(1,MonteCarlo);</span>
00259 <span class="comment">//                                                      g2=rb2.getPartialGamma(2,MonteCarlo);</span>
00260 <span class="comment">//                                                      v1=rb2.getPartialVega(1,MonteCarlo);</span>
00261 <span class="comment">//                                                      v2=rb2.getPartialVega(2,MonteCarlo);</span>
00262 <span class="comment">//                                                      corr=rb2.getCorrelRisk(MonteCarlo);</span>
00263 <span class="comment">//                                                      rho=rb2.getRho(MonteCarlo);</span>
00264 <span class="comment">//                                                      theta=rb2.getTheta(MonteCarlo);</span>
00265 <span class="comment">//</span>
00266 <span class="comment">//                                                      myfile &lt;&lt;S1&lt;&lt;","&lt;&lt;S2&lt;&lt;","&lt;&lt;K&lt;&lt;","&lt;&lt;correl&lt;&lt;","&lt;&lt;vol1&lt;&lt;","&lt;&lt;vol2&lt;&lt;","&lt;&lt;"MaxCall"&lt;&lt;","&lt;&lt;"MC"&lt;&lt;","&lt;&lt;price&lt;&lt;","&lt;&lt;d1&lt;&lt;","&lt;&lt;d2&lt;&lt;","&lt;&lt;g1&lt;&lt;","&lt;&lt;g2&lt;&lt;","&lt;&lt;v1&lt;&lt;","&lt;&lt;v2&lt;&lt;","&lt;&lt;rho&lt;&lt;","&lt;&lt;corr&lt;&lt;","&lt;&lt;theta&lt;&lt;"\n";</span>
00267 <span class="comment">//</span>
00268 <span class="comment">//                                                      price=rb2.getPrice(ClosedForm);</span>
00269 <span class="comment">//                                                      d1=rb2.getPartialDelta(1,ClosedForm);</span>
00270 <span class="comment">//                                                      d2=rb2.getPartialDelta(2,ClosedForm);</span>
00271 <span class="comment">//                                                      g1=rb2.getPartialGamma(1,ClosedForm);</span>
00272 <span class="comment">//                                                      g2=rb2.getPartialGamma(2,ClosedForm);</span>
00273 <span class="comment">//                                                      v1=rb2.getPartialVega(1,ClosedForm);</span>
00274 <span class="comment">//                                                      v2=rb2.getPartialVega(2,ClosedForm);</span>
00275 <span class="comment">//                                                      corr=rb2.getCorrelRisk(ClosedForm);</span>
00276 <span class="comment">//                                                      rho=rb2.getRho(ClosedForm);</span>
00277 <span class="comment">//                                                      theta=rb2.getTheta(ClosedForm);</span>
00278 <span class="comment">//</span>
00279 <span class="comment">//                                                      myfile &lt;&lt;S1&lt;&lt;","&lt;&lt;S2&lt;&lt;","&lt;&lt;K&lt;&lt;","&lt;&lt;correl&lt;&lt;","&lt;&lt;vol1&lt;&lt;","&lt;&lt;vol2&lt;&lt;","&lt;&lt;"MaxCall"&lt;&lt;","&lt;&lt;"CF"&lt;&lt;","&lt;&lt;price&lt;&lt;","&lt;&lt;d1&lt;&lt;","&lt;&lt;d2&lt;&lt;","&lt;&lt;g1&lt;&lt;","&lt;&lt;g2&lt;&lt;","&lt;&lt;v1&lt;&lt;","&lt;&lt;v2&lt;&lt;","&lt;&lt;rho&lt;&lt;","&lt;&lt;corr&lt;&lt;","&lt;&lt;theta&lt;&lt;"\n";</span>
00281 <span class="comment"></span><span class="comment">//                                                      rb2.setRainbowType(Min2AssetsPut);</span>
00282 <span class="comment">//</span>
00283 <span class="comment">//                                                      price=rb2.getPrice(MonteCarlo);</span>
00284 <span class="comment">//                                                      d1=rb2.getPartialDelta(1,MonteCarlo);</span>
00285 <span class="comment">//                                                      d2=rb2.getPartialDelta(2,MonteCarlo);</span>
00286 <span class="comment">//                                                      g1=rb2.getPartialGamma(1,MonteCarlo);</span>
00287 <span class="comment">//                                                      g2=rb2.getPartialGamma(2,MonteCarlo);</span>
00288 <span class="comment">//                                                      v1=rb2.getPartialVega(1,MonteCarlo);</span>
00289 <span class="comment">//                                                      v2=rb2.getPartialVega(2,MonteCarlo);</span>
00290 <span class="comment">//                                                      corr=rb2.getCorrelRisk(MonteCarlo);</span>
00291 <span class="comment">//                                                      rho=rb2.getRho(MonteCarlo);</span>
00292 <span class="comment">//                                                      theta=rb2.getTheta(MonteCarlo);</span>
00293 <span class="comment">//</span>
00294 <span class="comment">//                                                      myfile &lt;&lt;S1&lt;&lt;","&lt;&lt;S2&lt;&lt;","&lt;&lt;K&lt;&lt;","&lt;&lt;correl&lt;&lt;","&lt;&lt;vol1&lt;&lt;","&lt;&lt;vol2&lt;&lt;","&lt;&lt;"MinPut"&lt;&lt;","&lt;&lt;"MC"&lt;&lt;","&lt;&lt;price&lt;&lt;","&lt;&lt;d1&lt;&lt;","&lt;&lt;d2&lt;&lt;","&lt;&lt;g1&lt;&lt;","&lt;&lt;g2&lt;&lt;","&lt;&lt;v1&lt;&lt;","&lt;&lt;v2&lt;&lt;","&lt;&lt;rho&lt;&lt;","&lt;&lt;corr&lt;&lt;","&lt;&lt;theta&lt;&lt;"\n";</span>
00295 <span class="comment">//</span>
00296 <span class="comment">//                                                      price=rb2.getPrice(ClosedForm);</span>
00297 <span class="comment">//                                                      d1=rb2.getPartialDelta(1,ClosedForm);</span>
00298 <span class="comment">//                                                      d2=rb2.getPartialDelta(2,ClosedForm);</span>
00299 <span class="comment">//                                                      g1=rb2.getPartialGamma(1,ClosedForm);</span>
00300 <span class="comment">//                                                      g2=rb2.getPartialGamma(2,ClosedForm);</span>
00301 <span class="comment">//                                                      v1=rb2.getPartialVega(1,ClosedForm);</span>
00302 <span class="comment">//                                                      v2=rb2.getPartialVega(2,ClosedForm);</span>
00303 <span class="comment">//                                                      corr=rb2.getCorrelRisk(ClosedForm);</span>
00304 <span class="comment">//                                                      rho=rb2.getRho(ClosedForm);</span>
00305 <span class="comment">//                                                      theta=rb2.getTheta(ClosedForm);</span>
00306 <span class="comment">//</span>
00307 <span class="comment">//                                                      myfile &lt;&lt;S1&lt;&lt;","&lt;&lt;S2&lt;&lt;","&lt;&lt;K&lt;&lt;","&lt;&lt;correl&lt;&lt;","&lt;&lt;vol1&lt;&lt;","&lt;&lt;vol2&lt;&lt;","&lt;&lt;"MinPut"&lt;&lt;","&lt;&lt;"CF"&lt;&lt;","&lt;&lt;price&lt;&lt;","&lt;&lt;d1&lt;&lt;","&lt;&lt;d2&lt;&lt;","&lt;&lt;g1&lt;&lt;","&lt;&lt;g2&lt;&lt;","&lt;&lt;v1&lt;&lt;","&lt;&lt;v2&lt;&lt;","&lt;&lt;rho&lt;&lt;","&lt;&lt;corr&lt;&lt;","&lt;&lt;theta&lt;&lt;"\n";</span>
00308 <span class="comment">//</span>
00309 <span class="comment">//                                              }</span>
00310 <span class="comment">//                                      }</span>
00311 <span class="comment">//                              }</span>
00312 <span class="comment">//                      }</span>
00313 <span class="comment">//              }</span>
00314 <span class="comment">//      }</span>
00315 <span class="comment">//      myfile.close();</span>
00316 
00317 
00318         <span class="comment">// output greeks and price vs strike - All with closed form, else it is a pain</span>
00319         <span class="comment">//ofstream myfile;</span>
00320         <span class="comment">//myfile.open ("c:/resRainbowPerStrike.txt");</span>
00321 
00322         <span class="comment">//myfile&lt;&lt;"Test Rainbows with S1=100, S2=100, vols at 0.20, rates at 0.10 for 1 Year"&lt;&lt;"\n";</span>
00323         <span class="comment">//Date start=Date();</span>
00324         <span class="comment">//start.setDateToToday();</span>
00325         <span class="comment">//Real exp=1.0;//1Y option</span>
00326         <span class="comment">//Real Strike;;</span>
00327         <span class="comment">//yieldCurve yc=yieldCurve(0.1);</span>
00328         <span class="comment">//volsurface v1=volsurface(0.2);</span>
00329         <span class="comment">//volsurface v2=volsurface(0.2);</span>
00330         <span class="comment">//valarray&lt;volsurface&gt; vols(2);</span>
00331         <span class="comment">//vols[0]=v1;</span>
00332         <span class="comment">//vols[1]=v2;</span>
00333         <span class="comment">//Real Spot1=100;</span>
00334         <span class="comment">//Real Spot2=100;</span>
00335         <span class="comment">//Real Mult=1;</span>
00336         <span class="comment">//Real Correl12=0.5;</span>
00337         <span class="comment">//Real weight1=1;</span>
00338         <span class="comment">//Real weight2=1;</span>
00339         <span class="comment">//bool outputmsg=false;</span>
00340 
00341         <span class="comment">//Real tempPrice=0.0;</span>
00342 
00344         <span class="comment">//      BestOf2AssetsCash,      WorstOf2AssetsCash,     BetterOf2Assets,</span>
00345         <span class="comment">//      Max2AssetsCall,         Min2AssetsCall,         Max2AssetsPut,          Min2AssetsPut</span>
00346         <span class="comment">//*/</span>
00347         <span class="comment">//RainbowOption rb1;</span>
00348         <span class="comment">//myfile&lt;&lt;"Strike,Price,Delta,Gamma,Vega,Correl,Rho\n";</span>
00349         <span class="comment">//myfile&lt;&lt;"BOCash";</span>
00350         <span class="comment">//for(Strike=50;Strike&lt;=150;Strike+=5){</span>
00351         <span class="comment">//      rb1=RainbowOption(BestOf2AssetsCash,start,exp,Strike,yc,vols,Spot1,Spot2,Mult,Correl12,weight1,weight2,outputmsg);</span>
00352         <span class="comment">//      myfile&lt;&lt;Strike&lt;&lt;","&lt;&lt;rb1.getPrice();</span>
00353         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialDelta(1);</span>
00354         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialGamma(1);</span>
00355         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialVega(1);</span>
00356         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getCorrelRisk();</span>
00357         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getRho();</span>
00358         <span class="comment">//      myfile&lt;&lt;"\n";</span>
00359         <span class="comment">//}</span>
00360         <span class="comment">//myfile&lt;&lt;"Better";</span>
00361         <span class="comment">//for(Strike=50;Strike&lt;=150;Strike+=5){</span>
00362         <span class="comment">//      rb1=RainbowOption(BetterOf2Assets,start,exp,Strike,yc,vols,Spot1,Spot2,Mult,Correl12,weight1,weight2,outputmsg);</span>
00363         <span class="comment">//      myfile&lt;&lt;Strike&lt;&lt;","&lt;&lt;rb1.getPrice();</span>
00364         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialDelta(1);</span>
00365         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialGamma(1);</span>
00366         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialVega(1);</span>
00367         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getCorrelRisk();</span>
00368         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getRho();</span>
00369         <span class="comment">//      myfile&lt;&lt;"\n";</span>
00370         <span class="comment">//}</span>
00371         <span class="comment">//myfile&lt;&lt;"Worse";</span>
00372         <span class="comment">//for(Strike=50;Strike&lt;=150;Strike+=5){</span>
00373         <span class="comment">//      rb1=RainbowOption(WorseOf2Assets,start,exp,Strike,yc,vols,Spot1,Spot2,Mult,Correl12,weight1,weight2,outputmsg);</span>
00374         <span class="comment">//      myfile&lt;&lt;Strike&lt;&lt;","&lt;&lt;rb1.getPrice();</span>
00375         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialDelta(1);</span>
00376         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialGamma(1);</span>
00377         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialVega(1);</span>
00378         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getCorrelRisk();</span>
00379         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getRho();</span>
00380         <span class="comment">//      myfile&lt;&lt;"\n";</span>
00381         <span class="comment">//}</span>
00382         <span class="comment">//myfile&lt;&lt;"MaxCall";</span>
00383         <span class="comment">//for(Strike=50;Strike&lt;=150;Strike+=5){</span>
00384         <span class="comment">//      rb1=RainbowOption(Max2AssetsCall,start,exp,Strike,yc,vols,Spot1,Spot2,Mult,Correl12,weight1,weight2,outputmsg);</span>
00385         <span class="comment">//      myfile&lt;&lt;Strike&lt;&lt;","&lt;&lt;rb1.getPrice();</span>
00386         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialDelta(1);</span>
00387         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialGamma(1);</span>
00388         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialVega(1);</span>
00389         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getCorrelRisk();</span>
00390         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getRho();</span>
00391         <span class="comment">//      myfile&lt;&lt;"\n";</span>
00392         <span class="comment">//}</span>
00393         <span class="comment">//myfile&lt;&lt;"MinCall";</span>
00394         <span class="comment">//for(Strike=50;Strike&lt;=150;Strike+=5){</span>
00395         <span class="comment">//      rb1=RainbowOption(Min2AssetsCall,start,exp,Strike,yc,vols,Spot1,Spot2,Mult,Correl12,weight1,weight2,outputmsg);</span>
00396         <span class="comment">//      myfile&lt;&lt;Strike&lt;&lt;","&lt;&lt;rb1.getPrice();</span>
00397         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialDelta(1);</span>
00398         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialGamma(1);</span>
00399         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialVega(1);</span>
00400         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getCorrelRisk();</span>
00401         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getRho();</span>
00402         <span class="comment">//      myfile&lt;&lt;"\n";</span>
00403         <span class="comment">//}</span>
00404         <span class="comment">//myfile&lt;&lt;"MaxPut";</span>
00405         <span class="comment">//for(Strike=50;Strike&lt;=150;Strike+=5){</span>
00406         <span class="comment">//      rb1=RainbowOption(Max2AssetsPut,start,exp,Strike,yc,vols,Spot1,Spot2,Mult,Correl12,weight1,weight2,outputmsg);</span>
00407         <span class="comment">//      myfile&lt;&lt;Strike&lt;&lt;","&lt;&lt;rb1.getPrice();</span>
00408         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialDelta(1);</span>
00409         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialGamma(1);</span>
00410         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialVega(1);</span>
00411         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getCorrelRisk();</span>
00412         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getRho();</span>
00413         <span class="comment">//      myfile&lt;&lt;"\n";</span>
00414         <span class="comment">//}</span>
00415         <span class="comment">//myfile&lt;&lt;"MinPut";</span>
00416         <span class="comment">//for(Strike=50;Strike&lt;=150;Strike+=5){</span>
00417         <span class="comment">//      rb1=RainbowOption(Min2AssetsPut,start,exp,Strike,yc,vols,Spot1,Spot2,Mult,Correl12,weight1,weight2,outputmsg);</span>
00418         <span class="comment">//      myfile&lt;&lt;Strike&lt;&lt;","&lt;&lt;rb1.getPrice();</span>
00419         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialDelta(1);</span>
00420         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialGamma(1);</span>
00421         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getPartialVega(1);</span>
00422         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getCorrelRisk();</span>
00423         <span class="comment">//      myfile&lt;&lt;","&lt;&lt;rb1.getRho();</span>
00424         <span class="comment">//      myfile&lt;&lt;"\n";</span>
00425         <span class="comment">//}</span>
00426         <span class="comment">//myfile.close();</span>
00427 
00428 <span class="comment">// for Jason</span>
00429         <span class="comment">//Date start=Date();</span>
00430         <span class="comment">//start.setDateToToday();</span>
00431         <span class="comment">//Real exp=1.0;//1Y option</span>
00432         <span class="comment">//Real Strike=100;</span>
00433         <span class="comment">//yieldCurve yc=yieldCurve(0.0457296);</span>
00434         <span class="comment">//volsurface v1=volsurface(0.2);</span>
00435         <span class="comment">//volsurface v2=volsurface(0.2);</span>
00436         <span class="comment">//valarray&lt;volsurface&gt; vols(2);</span>
00437         <span class="comment">//vols[0]=v1;</span>
00438         <span class="comment">//vols[1]=v2;</span>
00439         <span class="comment">//Real Spot1=100;</span>
00440         <span class="comment">//Real Spot2=105;</span>
00441         <span class="comment">//Real Mult=1;</span>
00442         <span class="comment">//Real Correl12=0.4;</span>
00443         <span class="comment">//Real weight1=0.5;</span>
00444         <span class="comment">//Real weight2=0.5;</span>
00445         <span class="comment">//bool outputmsg=false;</span>
00446 
00447         <span class="comment">//Real tempPrice=0.0;</span>
00448 
00449         <span class="comment">//RainbowOption rb1=RainbowOption(SpreadOptionMax,start,exp,Strike,yc,vols,Spot1,Spot2,Mult,Correl12,weight1,weight2,outputmsg);</span>
00450 
00452         <span class="comment">//cout&lt;&lt;"\nWorstOf2AssetsCash&lt;&lt;endl;</span>
00453         <span class="comment">//rb1.setRainbowType(WorstOf2AssetsCash);</span>
00454         <span class="comment">//tempPrice=rb1.getPrice();</span>
00455         <span class="comment">//cout&lt;&lt;"PriceWorstOf2AssetsCashByMC : "&lt;&lt;tempPrice&lt;&lt;endl;</span>
00456 
00458         <span class="comment">//cout&lt;&lt;"\nCompare Best Of 2 Assets plus cash"&lt;&lt;endl;</span>
00459         <span class="comment">//rb1.setRainbowType(BestOf2AssetsCash);</span>
00460         <span class="comment">//tempPrice=rb1.getPrice(MonteCarlo);</span>
00461         <span class="comment">//cout&lt;&lt;"PriceBestOf2AssetsCashByMC 1: "&lt;&lt;tempPrice&lt;&lt;endl;</span>
00462 
00463         <span class="comment">//cout&lt;&lt;"\nCompare Max Of 2 Assets Call"&lt;&lt;endl;</span>
00464         <span class="comment">//rb1.setRainbowType(Max2AssetsCall);</span>
00465         <span class="comment">//tempPrice=rb1.getPrice(MonteCarlo);</span>
00466         <span class="comment">//cout&lt;&lt;"PriceMax2AssetsByMCCall : "&lt;&lt;tempPrice&lt;&lt;endl;</span>
00467 
00468         <span class="comment">//cout&lt;&lt;"\nCompare Min Of 2 Assets Call"&lt;&lt;endl;</span>
00469         <span class="comment">//rb1.setRainbowType(Min2AssetsCall);</span>
00470         <span class="comment">//tempPrice=rb1.getPrice(MonteCarlo);</span>
00471         <span class="comment">//cout&lt;&lt;"PriceMin2AssetsByMCCall : "&lt;&lt;tempPrice&lt;&lt;endl;</span>
00472 
00473         <span class="comment">//cout&lt;&lt;"\nCompare Max Of 2 Assets Put"&lt;&lt;endl;</span>
00474         <span class="comment">//rb1.setRainbowType(Max2AssetsPut);</span>
00475         <span class="comment">//tempPrice=rb1.getPrice(MonteCarlo);</span>
00476         <span class="comment">//cout&lt;&lt;"PriceMax2AssetsByMCPut : "&lt;&lt;tempPrice&lt;&lt;endl;</span>
00477 
00478         <span class="comment">//cout&lt;&lt;"\nCompare Min Of 2 Assets Put"&lt;&lt;endl;</span>
00479         <span class="comment">//rb1.setRainbowType(Min2AssetsPut);</span>
00480         <span class="comment">//tempPrice=rb1.getPrice(MonteCarlo);</span>
00481         <span class="comment">//cout&lt;&lt;"PriceMin2AssetsByMCPut : "&lt;&lt;tempPrice&lt;&lt;endl;</span>
00482         <span class="comment">//</span>
00483         <span class="comment">//cout&lt;&lt;"\nCompare Better of 2"&lt;&lt;endl;</span>
00484         <span class="comment">//rb1.setRainbowType(BetterOf2Assets);</span>
00485         <span class="comment">//tempPrice=rb1.getPrice(MonteCarlo);</span>
00486         <span class="comment">//cout&lt;&lt;"PriceByMc_BetterOf2Assets : "&lt;&lt;tempPrice&lt;&lt;endl;</span>
00487 
00488         <span class="comment">//cout&lt;&lt;"\nCompare Worse of 2"&lt;&lt;endl;</span>
00489         <span class="comment">//rb1.setRainbowType(WorseOf2Assets);</span>
00490         <span class="comment">//tempPrice=rb1.getPrice(MonteCarlo);</span>
00491         <span class="comment">//cout&lt;&lt;"PriceByMc_WorseOf2Assets : "&lt;&lt;tempPrice&lt;&lt;endl;</span>
00492 
00493         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00494 }
</pre></div><hr size="1"><address style="align: right;"><small>
<b>Note: Generated nightly - reload for latest version</b><br>
Generated on Thu Dec 22 13:21:44 2005 for <a href="http://terreneuve.sourceforge.net">terreneuve</a> by <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0></a> 1.3.6</small></address>
</body>
</html>
