<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MCEngine.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>MCEngine.cpp</h1><a href="MCEngine_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include ".\mcengine.h"</span>
00002 
<a name="l00003"></a><a class="code" href="classMCEngine.html#a0">00003</a> <a class="code" href="classMCEngine.html#a2">MCEngine::MCEngine</a>(<a class="code" href="types_8h.html#a9">LongNatural</a> nPaths,<a class="code" href="types_8h.html#a9">LongNatural</a> nDates,valarray&lt;Real&gt; DiscFactors)
00004                                         :       m_nDates(nDates),
00005                                                 m_nPaths(nPaths)
00006 {
00007         <a class="code" href="classMCEngine.html#r0">m_price</a>=0.;
00008         <a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>=DiscFactors[nDates-1];
00009 }
00010 
<a name="l00011"></a><a class="code" href="classMCEngine.html#a3">00011</a> <a class="code" href="classMCEngine.html#a2">MCEngine::MCEngine</a>(<a class="code" href="types_8h.html#a9">LongNatural</a> nPaths,<a class="code" href="types_8h.html#a10">Real</a> DFToMaturity)
00012                                         :       m_nPaths(nPaths),
00013                                                 m_DiscFactor(DFToMaturity)
00014 {
00015         m_nDates=1;
00016         <a class="code" href="classMCEngine.html#r0">m_price</a>=0.;
00017 
00018 }
00019 
<a name="l00020"></a><a class="code" href="classMCEngine.html#a1">00020</a> <a class="code" href="classMCEngine.html#a1">MCEngine::~MCEngine</a>()
00021 {
00022 }
00023 
<a name="l00024"></a><a class="code" href="classMCEngine.html#a2">00024</a> <a class="code" href="classMCEngine.html#a2">MCEngine::MCEngine</a>(<span class="keywordtype">void</span>)
00025 {
00026 }
00027 
<a name="l00028"></a><a class="code" href="classMCEngine.html#a4">00028</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a4">MCEngine::RunEngineRainbow2SpreadOptionMax</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,valarray&lt;GaussianProcess&gt; pHazardRateProcesses,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,<a class="code" href="types_8h.html#a10">Real</a> gaussianSample,valarray&lt;Real&gt; TerminalPoints,valarray&lt;Real&gt; weights,<a class="code" href="classMatrix.html">Matrix</a> Correlation,<a class="code" href="types_8h.html#a10">Real</a> Mult)
00029 {
00030         <a class="code" href="types_8h.html#a7">Natural</a> size=Correlation.<a class="code" href="classMatrix.html#a48">GetRows</a>();
00031         <a class="code" href="classMatrix.html">Matrix</a> independantShocks=<a class="code" href="classMatrix.html">Matrix</a>(0.0,size,1);
00032         Matrix Cholesky=Correlation.<a class="code" href="classMatrix.html#a69">CholeskyDecomposition</a>();
00033         Matrix correlatedShocks=Matrix(0.0,size,1);
00034         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00035         {
00036                 <span class="comment">// generating N non correlated samples</span>
00037                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00038                         pRandom-&gt;<a class="code" href="classRandom.html#a10">GetGaussian</a>(gaussianSample);
00039                         independantShocks.<a class="code" href="classMatrix.html#a53">SetValue</a>(j,0,gaussianSample);
00040                 }
00041                 <span class="comment">// recorrelated them</span>
00042                 correlatedShocks=Cholesky*independantShocks;
00043                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00044                         TerminalPoints[j]=pHazardRateProcesses[j].BuildTerminalPoint((<a class="code" href="types_8h.html#a10">Real</a>)correlatedShocks[j][0]);
00045                 }
00046                 
00047                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a15">Rainbow2SpreadOptionMax</a>(TerminalPoints[0],TerminalPoints[1],weights[0],weights[1],Mult)*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00048         }
00049 }
00050 
<a name="l00051"></a><a class="code" href="classMCEngine.html#a5">00051</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a5">MCEngine::RunEngineRainbow2AssetsBasketMax</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,valarray&lt;GaussianProcess&gt; pHazardRateProcesses,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,<a class="code" href="types_8h.html#a10">Real</a> gaussianSample,valarray&lt;Real&gt; TerminalPoints,valarray&lt;Real&gt; weights,<a class="code" href="classMatrix.html">Matrix</a> Correlation,<a class="code" href="types_8h.html#a10">Real</a> Mult)
00052 {
00053         <a class="code" href="types_8h.html#a7">Natural</a> size=Correlation.<a class="code" href="classMatrix.html#a48">GetRows</a>();
00054         <a class="code" href="classMatrix.html">Matrix</a> independantShocks=<a class="code" href="classMatrix.html">Matrix</a>(0.0,size,1);
00055         Matrix Cholesky=Correlation.<a class="code" href="classMatrix.html#a69">CholeskyDecomposition</a>();
00056         Matrix correlatedShocks=Matrix(0.0,size,1);
00057         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00058         {
00059                 <span class="comment">// generating N non correlated samples</span>
00060                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00061                         pRandom-&gt;<a class="code" href="classRandom.html#a10">GetGaussian</a>(gaussianSample);
00062                         independantShocks.<a class="code" href="classMatrix.html#a53">SetValue</a>(j,0,gaussianSample);
00063                 }
00064                 <span class="comment">// recorrelated them</span>
00065                 correlatedShocks=Cholesky*independantShocks;
00066                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00067                         TerminalPoints[j]=pHazardRateProcesses[j].BuildTerminalPoint((<a class="code" href="types_8h.html#a10">Real</a>)correlatedShocks[j][0]);
00068                 }
00069                 
00070                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a16">Rainbow2AssetsBasketMax</a>(TerminalPoints[0],TerminalPoints[1],weights[0],weights[1],Mult)*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00071         }
00072 }
00073 
00074 
<a name="l00075"></a><a class="code" href="classMCEngine.html#a6">00075</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a6">MCEngine::RunEngineRainbowBestOf2AssetsCash</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,valarray&lt;GaussianProcess&gt; pHazardRateProcesses,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,<a class="code" href="types_8h.html#a10">Real</a> gaussianSample,valarray&lt;Real&gt; TerminalPoints,valarray&lt;Real&gt; weights,<a class="code" href="classMatrix.html">Matrix</a> Correlation)
00076 {
00077         <a class="code" href="types_8h.html#a7">Natural</a> size=Correlation.<a class="code" href="classMatrix.html#a48">GetRows</a>();
00078         <a class="code" href="classMatrix.html">Matrix</a> independantShocks=<a class="code" href="classMatrix.html">Matrix</a>(0.0,size,1);
00079         Matrix Cholesky=Correlation.<a class="code" href="classMatrix.html#a69">CholeskyDecomposition</a>();
00080         Matrix correlatedShocks=Matrix(0.0,size,1);
00081         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00082         {
00083                 <span class="comment">// generating N non correlated samples</span>
00084                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00085                         pRandom-&gt;<a class="code" href="classRandom.html#a10">GetGaussian</a>(gaussianSample);
00086                         independantShocks.<a class="code" href="classMatrix.html#a53">SetValue</a>(j,0,gaussianSample);
00087                 }
00088                 <span class="comment">// recorrelated them</span>
00089                 correlatedShocks=Cholesky*independantShocks;
00090                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00091                         TerminalPoints[j]=pHazardRateProcesses[j].BuildTerminalPoint((<a class="code" href="types_8h.html#a10">Real</a>)correlatedShocks[j][0]);
00092                 }
00093                 
00094                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a17">RainbowBestOf2AssetsCash</a>(TerminalPoints[0],TerminalPoints[1],weights[0],weights[1])*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00095         }
00096 }
00097 
<a name="l00098"></a><a class="code" href="classMCEngine.html#a7">00098</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a7">MCEngine::RunEngineRainbowWorstOf2AssetsCash</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,valarray&lt;GaussianProcess&gt; pHazardRateProcesses,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,<a class="code" href="types_8h.html#a10">Real</a> gaussianSample,valarray&lt;Real&gt; TerminalPoints,valarray&lt;Real&gt; weights,<a class="code" href="classMatrix.html">Matrix</a> Correlation)
00099 {
00100         <a class="code" href="types_8h.html#a7">Natural</a> size=Correlation.<a class="code" href="classMatrix.html#a48">GetRows</a>();
00101         <a class="code" href="classMatrix.html">Matrix</a> independantShocks=<a class="code" href="classMatrix.html">Matrix</a>(0.0,size,1);
00102         Matrix Cholesky=Correlation.<a class="code" href="classMatrix.html#a69">CholeskyDecomposition</a>();
00103         Matrix correlatedShocks=Matrix(0.0,size,1);
00104         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00105         {
00106                 <span class="comment">// generating N non correlated samples</span>
00107                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00108                         pRandom-&gt;<a class="code" href="classRandom.html#a10">GetGaussian</a>(gaussianSample);
00109                         independantShocks.<a class="code" href="classMatrix.html#a53">SetValue</a>(j,0,gaussianSample);
00110                 }
00111                 <span class="comment">// recorrelated them</span>
00112                 correlatedShocks=Cholesky*independantShocks;
00113                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00114                         TerminalPoints[j]=pHazardRateProcesses[j].BuildTerminalPoint((<a class="code" href="types_8h.html#a10">Real</a>)correlatedShocks[j][0]);
00115                 }
00116                 
00117                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a18">RainbowWorstOf2AssetsCash</a>(TerminalPoints[0],TerminalPoints[1],weights[0],weights[1])*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00118         }
00119 }
00120 
<a name="l00121"></a><a class="code" href="classMCEngine.html#a8">00121</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a8">MCEngine::RunEngineRainbowMax2AssetsCall</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,valarray&lt;GaussianProcess&gt; pHazardRateProcesses,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,<a class="code" href="types_8h.html#a10">Real</a> gaussianSample,valarray&lt;Real&gt; TerminalPoints,valarray&lt;Real&gt; weights,<a class="code" href="classMatrix.html">Matrix</a> Correlation,<a class="code" href="types_8h.html#a10">Real</a> Mult)
00122 {
00123         <a class="code" href="types_8h.html#a7">Natural</a> size=Correlation.<a class="code" href="classMatrix.html#a48">GetRows</a>();
00124         <a class="code" href="classMatrix.html">Matrix</a> independantShocks=<a class="code" href="classMatrix.html">Matrix</a>(0.0,size,1);
00125         Matrix Cholesky=Correlation.<a class="code" href="classMatrix.html#a69">CholeskyDecomposition</a>();
00126         Matrix correlatedShocks=Matrix(0.0,size,1);
00127         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00128         {
00129                 <span class="comment">// generating N non correlated samples</span>
00130                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00131                         pRandom-&gt;<a class="code" href="classRandom.html#a10">GetGaussian</a>(gaussianSample);
00132                         independantShocks.<a class="code" href="classMatrix.html#a53">SetValue</a>(j,0,gaussianSample);
00133                 }
00134                 <span class="comment">// recorrelated them</span>
00135                 correlatedShocks=Cholesky*independantShocks;
00136                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00137                         TerminalPoints[j]=pHazardRateProcesses[j].BuildTerminalPoint((<a class="code" href="types_8h.html#a10">Real</a>)correlatedShocks[j][0]);
00138                 }
00139                 
00140                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a19">RainbowMax2AssetsCall</a>(TerminalPoints[0],TerminalPoints[1],weights[0],weights[1],Mult)*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00141         }
00142 }
00143 
<a name="l00144"></a><a class="code" href="classMCEngine.html#a9">00144</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a9">MCEngine::RunEngineRainbowMin2AssetsCall</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,valarray&lt;GaussianProcess&gt; pHazardRateProcesses,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,<a class="code" href="types_8h.html#a10">Real</a> gaussianSample,valarray&lt;Real&gt; TerminalPoints,valarray&lt;Real&gt; weights,<a class="code" href="classMatrix.html">Matrix</a> Correlation,<a class="code" href="types_8h.html#a10">Real</a> Mult)
00145 {
00146         <a class="code" href="types_8h.html#a7">Natural</a> size=Correlation.<a class="code" href="classMatrix.html#a48">GetRows</a>();
00147         <a class="code" href="classMatrix.html">Matrix</a> independantShocks=<a class="code" href="classMatrix.html">Matrix</a>(0.0,size,1);
00148         Matrix Cholesky=Correlation.<a class="code" href="classMatrix.html#a69">CholeskyDecomposition</a>();
00149         Matrix correlatedShocks=Matrix(0.0,size,1);
00150         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00151         {
00152                 <span class="comment">// generating N non correlated samples</span>
00153                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00154                         pRandom-&gt;<a class="code" href="classRandom.html#a10">GetGaussian</a>(gaussianSample);
00155                         independantShocks.<a class="code" href="classMatrix.html#a53">SetValue</a>(j,0,gaussianSample);
00156                 }
00157                 <span class="comment">// recorrelated them</span>
00158                 correlatedShocks=Cholesky*independantShocks;
00159                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00160                         TerminalPoints[j]=pHazardRateProcesses[j].BuildTerminalPoint((<a class="code" href="types_8h.html#a10">Real</a>)correlatedShocks[j][0]);
00161                 }
00162                 
00163                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a20">RainbowMin2AssetsCall</a>(TerminalPoints[0],TerminalPoints[1],weights[0],weights[1],Mult)*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00164         }
00165 }
00166 
<a name="l00167"></a><a class="code" href="classMCEngine.html#a10">00167</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a10">MCEngine::RunEngineRainbowMax2AssetsPut</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,valarray&lt;GaussianProcess&gt; pHazardRateProcesses,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,<a class="code" href="types_8h.html#a10">Real</a> gaussianSample,valarray&lt;Real&gt; TerminalPoints,valarray&lt;Real&gt; weights,<a class="code" href="classMatrix.html">Matrix</a> Correlation,<a class="code" href="types_8h.html#a10">Real</a> Mult)
00168 {
00169         <a class="code" href="types_8h.html#a7">Natural</a> size=Correlation.<a class="code" href="classMatrix.html#a48">GetRows</a>();
00170         <a class="code" href="classMatrix.html">Matrix</a> independantShocks=<a class="code" href="classMatrix.html">Matrix</a>(0.0,size,1);
00171         Matrix Cholesky=Correlation.<a class="code" href="classMatrix.html#a69">CholeskyDecomposition</a>();
00172         Matrix correlatedShocks=Matrix(0.0,size,1);
00173         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00174         {
00175                 <span class="comment">// generating N non correlated samples</span>
00176                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00177                         pRandom-&gt;<a class="code" href="classRandom.html#a10">GetGaussian</a>(gaussianSample);
00178                         independantShocks.<a class="code" href="classMatrix.html#a53">SetValue</a>(j,0,gaussianSample);
00179                 }
00180                 <span class="comment">// recorrelated them</span>
00181                 correlatedShocks=Cholesky*independantShocks;
00182                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00183                         TerminalPoints[j]=pHazardRateProcesses[j].BuildTerminalPoint((<a class="code" href="types_8h.html#a10">Real</a>)correlatedShocks[j][0]);
00184                 }
00185                 
00186                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a21">RainbowMax2AssetsPut</a>(TerminalPoints[0],TerminalPoints[1],weights[0],weights[1],Mult)*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00187         }
00188 }
00189 
<a name="l00190"></a><a class="code" href="classMCEngine.html#a11">00190</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a11">MCEngine::RunEngineRainbowMin2AssetsPut</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,valarray&lt;GaussianProcess&gt; pHazardRateProcesses,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,<a class="code" href="types_8h.html#a10">Real</a> gaussianSample,valarray&lt;Real&gt; TerminalPoints,valarray&lt;Real&gt; weights,<a class="code" href="classMatrix.html">Matrix</a> Correlation,<a class="code" href="types_8h.html#a10">Real</a> Mult)
00191 {
00192         <a class="code" href="types_8h.html#a7">Natural</a> size=Correlation.<a class="code" href="classMatrix.html#a48">GetRows</a>();
00193         <a class="code" href="classMatrix.html">Matrix</a> independantShocks=<a class="code" href="classMatrix.html">Matrix</a>(0.0,size,1);
00194         Matrix Cholesky=Correlation.<a class="code" href="classMatrix.html#a69">CholeskyDecomposition</a>();
00195         Matrix correlatedShocks=Matrix(0.0,size,1);
00196         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00197         {
00198                 <span class="comment">// generating N non correlated samples</span>
00199                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00200                         pRandom-&gt;<a class="code" href="classRandom.html#a10">GetGaussian</a>(gaussianSample);
00201                         independantShocks.<a class="code" href="classMatrix.html#a53">SetValue</a>(j,0,gaussianSample);
00202                 }
00203                 <span class="comment">// recorrelated them</span>
00204                 correlatedShocks=Cholesky*independantShocks;
00205                 <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a7">Natural</a> j=0;j&lt;size;j++){
00206                         TerminalPoints[j]=pHazardRateProcesses[j].BuildTerminalPoint((<a class="code" href="types_8h.html#a10">Real</a>)correlatedShocks[j][0]);
00207                 }
00208                 
00209                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a22">RainbowMin2AssetsPut</a>(TerminalPoints[0],TerminalPoints[1],weights[0],weights[1],Mult)*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00210         }
00211 }
00212 
<a name="l00213"></a><a class="code" href="classMCEngine.html#a12">00213</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a12">MCEngine::RunEngineAsianCall</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,<a class="code" href="classGaussianProcess.html">GaussianProcess</a>* pHazardRateProcess,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,valarray &lt;Real&gt; gaussianSample,valarray&lt;Real&gt; vHazardRatePath)
00214 {
00215         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00216         {
00217                 pRandom-&gt;<a class="code" href="classRandom.html#a9">GetGaussians</a>(gaussianSample);
00218                 vHazardRatePath=pHazardRateProcess-&gt;<a class="code" href="classGaussianProcess.html#a4">BuildPath</a>(gaussianSample);
00219 
00220                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a7">AsianCall</a>(vHazardRatePath,m_nDates)*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00221         }
00222 }
00223 
<a name="l00224"></a><a class="code" href="classMCEngine.html#a13">00224</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a13">MCEngine::RunEngineAsianPut</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,<a class="code" href="classGaussianProcess.html">GaussianProcess</a>* pHazardRateProcess,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,valarray &lt;Real&gt; gaussianSample,valarray&lt;Real&gt; vHazardRatePath)
00225 {
00226         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00227         {
00228                 pRandom-&gt;<a class="code" href="classRandom.html#a9">GetGaussians</a>(gaussianSample);
00229                 vHazardRatePath=pHazardRateProcess-&gt;<a class="code" href="classGaussianProcess.html#a4">BuildPath</a>(gaussianSample);
00230 
00231                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a8">AsianPut</a>(vHazardRatePath,m_nDates)*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00232         }
00233 }
00234 
<a name="l00235"></a><a class="code" href="classMCEngine.html#a14">00235</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a14">MCEngine::RunEngineCall</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,<a class="code" href="classGaussianProcess.html">GaussianProcess</a>* pHazardRateProcess,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,valarray&lt;Real&gt; gaussianSample,valarray&lt;Real&gt; vHazardRatePath)
00236 {
00237         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00238         {
00239                 <span class="keywordflow">if</span> (i % 2 == 0)
00240                         pRandom-&gt;<a class="code" href="classRandom.html#a9">GetGaussians</a>(gaussianSample);
00241                 <span class="keywordflow">else</span> {
00242                         <span class="keywordflow">for</span> (<a class="code" href="types_8h.html#a9">LongNatural</a> j=0;j&lt;gaussianSample.size();j++) {
00243                                 gaussianSample[j]=-gaussianSample[j];
00244                         }
00245                 }
00246                 vHazardRatePath=pHazardRateProcess-&gt;<a class="code" href="classGaussianProcess.html#a4">BuildPath</a>(gaussianSample);
00247 
00248                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a5">Call</a>(vHazardRatePath[0])*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00249         }
00250 }
00251 
<a name="l00252"></a><a class="code" href="classMCEngine.html#a15">00252</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a15">MCEngine::RunEnginePut</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,<a class="code" href="classGaussianProcess.html">GaussianProcess</a>* pHazardRateProcess,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,valarray &lt;Real&gt; gaussianSample,valarray&lt;Real&gt; vHazardRatePath)
00253 {
00254         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00255         {
00256                 pRandom-&gt;<a class="code" href="classRandom.html#a9">GetGaussians</a>(gaussianSample);
00257                 vHazardRatePath=pHazardRateProcess-&gt;<a class="code" href="classGaussianProcess.html#a4">BuildPath</a>(gaussianSample);
00258 
00259                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a6">Put</a>(vHazardRatePath[0])*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00260         }
00261 }
00262 
<a name="l00263"></a><a class="code" href="classMCEngine.html#a16">00263</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a16">MCEngine::RunEngineRevLookbackCall</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,<a class="code" href="classGaussianProcess.html">GaussianProcess</a>* pHazardRateProcess,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,valarray &lt;Real&gt; gaussianSample,valarray&lt;Real&gt; vHazardRatePath)
00264 {
00265         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00266         {
00267                 pRandom-&gt;<a class="code" href="classRandom.html#a9">GetGaussians</a>(gaussianSample);
00268                 vHazardRatePath=pHazardRateProcess-&gt;<a class="code" href="classGaussianProcess.html#a4">BuildPath</a>(gaussianSample);
00269 
00270                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a9">RevLookbackCall</a>(vHazardRatePath,m_nDates)*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00271         }
00272 }
00273 
<a name="l00274"></a><a class="code" href="classMCEngine.html#a17">00274</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a17">MCEngine::RunEngineRevLookbackPut</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,<a class="code" href="classGaussianProcess.html">GaussianProcess</a>* pHazardRateProcess,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,valarray &lt;Real&gt; gaussianSample,valarray&lt;Real&gt; vHazardRatePath)
00275 {
00276         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00277         {
00278                 pRandom-&gt;<a class="code" href="classRandom.html#a9">GetGaussians</a>(gaussianSample);
00279                 vHazardRatePath=pHazardRateProcess-&gt;<a class="code" href="classGaussianProcess.html#a4">BuildPath</a>(gaussianSample);
00280 
00281                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a10">RevLookbackPut</a>(vHazardRatePath,m_nDates)*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00282         }
00283 }
00284 
<a name="l00285"></a><a class="code" href="classMCEngine.html#a18">00285</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a18">MCEngine::RunEngineBarrierCall</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,<a class="code" href="classGaussianProcess.html">GaussianProcess</a>* pHazardRateProcess,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,valarray &lt;Real&gt; gaussianSample,valarray&lt;Real&gt; vHazardRatePath)
00286 {
00287         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00288         {
00289                 pRandom-&gt;<a class="code" href="classRandom.html#a9">GetGaussians</a>(gaussianSample);
00290                 vHazardRatePath=pHazardRateProcess-&gt;<a class="code" href="classGaussianProcess.html#a4">BuildPath</a>(gaussianSample);
00291 
00292                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a11">BarrierCall</a>(vHazardRatePath,m_nDates)*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00293         }
00294 }
00295 
<a name="l00296"></a><a class="code" href="classMCEngine.html#a19">00296</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a19">MCEngine::RunEngineBarrierPut</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,<a class="code" href="classGaussianProcess.html">GaussianProcess</a>* pHazardRateProcess,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,valarray &lt;Real&gt; gaussianSample,valarray&lt;Real&gt; vHazardRatePath)
00297 {
00298         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00299         {
00300                 pRandom-&gt;<a class="code" href="classRandom.html#a9">GetGaussians</a>(gaussianSample);
00301                 vHazardRatePath=pHazardRateProcess-&gt;<a class="code" href="classGaussianProcess.html#a4">BuildPath</a>(gaussianSample);
00302 
00303                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a12">BarrierPut</a>(vHazardRatePath,m_nDates)*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00304         }
00305 }
00306 
<a name="l00307"></a><a class="code" href="classMCEngine.html#a20">00307</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a20">MCEngine::RunEngineFlooredCliquet</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,<a class="code" href="classGaussianProcess.html">GaussianProcess</a>* pHazardRateProcess,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,valarray &lt;Real&gt; gaussianSample,valarray&lt;Real&gt; vHazardRatePath)
00308 {
00309         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00310         {
00311                 pRandom-&gt;<a class="code" href="classRandom.html#a9">GetGaussians</a>(gaussianSample);
00312                 vHazardRatePath=pHazardRateProcess-&gt;<a class="code" href="classGaussianProcess.html#a4">BuildPath</a>(gaussianSample);
00313 
00314                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a13">FlooredCliquet</a>(vHazardRatePath[0],vHazardRatePath[m_nDates])*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00315         }
00316 }
00317 
<a name="l00318"></a><a class="code" href="classMCEngine.html#a21">00318</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a21">MCEngine::RunEngineCappedCliquet</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,<a class="code" href="classGaussianProcess.html">GaussianProcess</a>* pHazardRateProcess,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,valarray &lt;Real&gt; gaussianSample,valarray&lt;Real&gt; vHazardRatePath)
00319 {
00320         <span class="keywordflow">for</span>(<a class="code" href="types_8h.html#a9">LongNatural</a> i=0;i&lt;<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;++i)
00321         {
00322                 pRandom-&gt;<a class="code" href="classRandom.html#a9">GetGaussians</a>(gaussianSample);
00323                 vHazardRatePath=pHazardRateProcess-&gt;<a class="code" href="classGaussianProcess.html#a4">BuildPath</a>(gaussianSample);
00324 
00325                 <a class="code" href="classMCEngine.html#r0">m_price</a>+=thePayOff.<a class="code" href="classPayOff.html#a14">CappedCliquet</a>(vHazardRatePath[0],vHazardRatePath[m_nDates])*<a class="code" href="classMCEngine.html#r1">m_DiscFactor</a>;
00326         }
00327 }
00328 
<a name="l00329"></a><a class="code" href="classMCEngine.html#a22">00329</a> <span class="keywordtype">void</span> <a class="code" href="classMCEngine.html#a22">MCEngine::RunEngineGeneral</a>(<a class="code" href="classRandom.html">Random</a>* pRandom,<a class="code" href="classGaussianProcess.html">GaussianProcess</a>* pHazardRateProcess,<a class="code" href="classPayOff.html">PayOff</a> thePayOff,valarray&lt;Real&gt; gaussianSample,valarray&lt;Real&gt; vHazardRatePath,<a class="code" href="types_8h.html#a7">Natural</a> Product)
00330 {
00331         <span class="keywordflow">if</span> (Product==1)
00332                 this-&gt;<a class="code" href="classMCEngine.html#a14">RunEngineCall</a>(pRandom,pHazardRateProcess,thePayOff,gaussianSample,vHazardRatePath);
00333         <span class="keywordflow">if</span> (Product==2)
00334                 this-&gt;<a class="code" href="classMCEngine.html#a15">RunEnginePut</a>(pRandom,pHazardRateProcess,thePayOff,gaussianSample,vHazardRatePath);
00335         <span class="keywordflow">if</span> (Product==3)
00336                 this-&gt;<a class="code" href="classMCEngine.html#a12">RunEngineAsianCall</a>(pRandom,pHazardRateProcess,thePayOff,gaussianSample,vHazardRatePath);
00337         <span class="keywordflow">if</span> (Product==4)
00338                 this-&gt;<a class="code" href="classMCEngine.html#a13">RunEngineAsianPut</a>(pRandom,pHazardRateProcess,thePayOff,gaussianSample,vHazardRatePath);
00339         <span class="keywordflow">if</span> (Product==5)
00340                 this-&gt;<a class="code" href="classMCEngine.html#a16">RunEngineRevLookbackCall</a>(pRandom,pHazardRateProcess,thePayOff,gaussianSample,vHazardRatePath);
00341         <span class="keywordflow">if</span> (Product==6)
00342                 this-&gt;<a class="code" href="classMCEngine.html#a17">RunEngineRevLookbackPut</a>(pRandom,pHazardRateProcess,thePayOff,gaussianSample,vHazardRatePath);
00343         <span class="keywordflow">if</span> (Product==7)
00344                 this-&gt;<a class="code" href="classMCEngine.html#a18">RunEngineBarrierCall</a>(pRandom,pHazardRateProcess,thePayOff,gaussianSample,vHazardRatePath);
00345         <span class="keywordflow">if</span> (Product==8)
00346                 this-&gt;<a class="code" href="classMCEngine.html#a19">RunEngineBarrierPut</a>(pRandom,pHazardRateProcess,thePayOff,gaussianSample,vHazardRatePath);
00347         <span class="keywordflow">if</span> (Product==9)
00348                 this-&gt;<a class="code" href="classMCEngine.html#a20">RunEngineFlooredCliquet</a>(pRandom,pHazardRateProcess,thePayOff,gaussianSample,vHazardRatePath);
00349         <span class="keywordflow">if</span> (Product==10)
00350                 this-&gt;<a class="code" href="classMCEngine.html#a21">RunEngineCappedCliquet</a>(pRandom,pHazardRateProcess,thePayOff,gaussianSample,vHazardRatePath);
00351 }
00352 
<a name="l00353"></a><a class="code" href="classMCEngine.html#a23">00353</a> <a class="code" href="types_8h.html#a10">Real</a> <a class="code" href="classMCEngine.html#a23">MCEngine::MCResult</a>()
00354 {
00355         <span class="keywordflow">return</span> <a class="code" href="classMCEngine.html#r0">m_price</a>/<a class="code" href="classMCEngine.html#r2">m_nPaths</a>;
00356 }
</pre></div><hr size="1"><address style="align: right;"><small>
<b>Note: Generated nightly - reload for latest version</b><br>
Generated on Thu Dec 22 13:21:44 2005 for <a href="http://terreneuve.sourceforge.net">terreneuve</a> by <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0></a> 1.3.6</small></address>
</body>
</html>
